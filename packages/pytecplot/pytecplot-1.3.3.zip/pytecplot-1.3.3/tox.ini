[tox]
envlist = py27, py{37,38,39}, examples, doc

[testenv]
usedevelop = True
extras = test
args_are_paths = False
passenv = DISPLAY USERNAME USER HOME HOMEPATH HOMEDRIVE DYLD_LIBRARY_PATH LD_LIBRARY_PATH RLM_LICENSE TECSDKHOME LD_PRELOAD
commands = python test/run-tests.py {posargs:--no-coverage test --info --failfast} --buffer

[testenv:py27]
deps =
    coverage==5.0.1
    pip==19.3.1
    setuptools==44.0.0
    wheel==0.33.6

[testenv:examples]
basepython = python3
deps = scipy
commands = python test/examples/test-examples.py {posargs} {toxinidir}/examples {envdir}/reference {envtmpdir}/test

[testenv:doc]
basepython = python3
extras = doc
whitelist_externals = make
changedir = docs
commands =
    make clean
    python build-html
