<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <record id="view_tree_lead_line_isp_infos" model="ir.ui.view">
    <field name="name">crm.lead.line ISP infos tree view (in crm lead)</field>
    <field name="model">crm.lead.line</field>
    <field name="inherit_id" ref="crm_lead_product.view_tree_lead_line" />
    <field name="arch" type="xml">
      <field name="product_id" position="after">
        <field name="is_mobile" invisible="1"/>
        <field name="broadband_isp_info"
          attrs="{'invisible': [('is_mobile','=',True)]}"/>
        <field name="mobile_isp_info"
          attrs="{'invisible': [('is_mobile','=',False)]}"/>
        <field name="ticket_number"/>
      </field>
    </field>
  </record>
  <record id="view_tree_lead_line_mobile" model="ir.ui.view">
    <field name="name">crm.lead.line mobile (in main menu)</field>
    <field name="model">crm.lead.line</field>
    <field name="arch" type="xml">
      <tree string="Mobile Lead Lines">
        <field name="id" widget="open_tab"/>
        <field name="subscription_request_id"/>
        <field name="partner_id"/>
        <field name="create_date"/>
        <field name="product_id"/>
        <field name="stage_id"/>
        <field name="mobile_isp_info_type"/>
        <field name="mobile_isp_info_icc"/>
        <field name="mobile_isp_info_phone_number"/>
      </tree>
    </field>
  </record>

  <act_window id="action_crm_lead_line_mobile" name="Mobile Lead Lines"
              res_model="crm.lead.line" view_mode="tree,form"
              domain="[('is_mobile','=',True)]"
  />
  <record model="ir.actions.act_window.view" id="action_crm_lead_line_mobile_tree">
    <field name="sequence">0</field>
    <field name="view_mode">tree</field>
    <field name="view_id" ref="view_tree_lead_line_mobile" />
    <field name="act_window_id" ref="action_crm_lead_line_mobile" />
  </record>

  <menuitem id="menu_crm_lead_line_mobile" name="Mobile Lead Lines"
            action="action_crm_lead_line_mobile"
            web_icon="somconnexio,static/description/mobile_lead_lines.png" />

  <record id="view_tree_lead_line_broadband" model="ir.ui.view">
    <field name="name">crm.lead.line broadband (in main menu)</field>
    <field name="model">crm.lead.line</field>
    <field name="arch" type="xml">
      <tree string="Broadband Lead lines">
        <field name="id" widget="open_tab"/>
        <field name="subscription_request_id"/>
        <field name="partner_id"/>
        <field name="create_date"/>
        <field name="product_id"/>
        <field name="stage_id"/>
        <field name="broadband_isp_info_type"/>
        <field name="broadband_isp_info_phone_number"/>
        <field name="broadband_isp_info_service_street"/>
        <field name="broadband_isp_info_service_street2"/>
        <field name="broadband_isp_info_service_city"/>
        <field name="broadband_isp_info_service_state_id"/>
      </tree>
    </field>
  </record>
  <act_window id="action_crm_lead_line_broadband" name="Broadband Lead Lines"
              res_model="crm.lead.line" view_mode="tree,form"
              domain="[('is_mobile','=',False)]"
  />
  <record model="ir.actions.act_window.view" id="action_crm_lead_line_broadband_tree">
    <field name="sequence">0</field>
    <field name="view_mode">tree</field>
    <field name="view_id" ref="view_tree_lead_line_broadband" />
    <field name="act_window_id" ref="action_crm_lead_line_broadband" />
  </record>

  <menuitem id="menu_crm_lead_line_broadband" name="Broadband Lead Lines"
            action="action_crm_lead_line_broadband"
            web_icon="somconnexio,static/description/broadband_lead_lines.png" />

  <record id="crm_lead_line_search_view" model="ir.ui.view">
    <field name="name">crm.lead.line search view</field>
    <field name="model">crm.lead.line</field>
    <field name="arch" type="xml">
      <search>
        <field name="name"
               filter_domain="['|', ('partner_id', 'ilike', self), ('subscription_request_id', 'ilike', self)]"/>
        <filter string="New" name="stage_id"
                domain="[('stage_id', '=', %(crm.stage_lead1)d)]"/>
        <filter string="Qualified" name="stage_id"
                domain="[('stage_id', '=', %(crm.stage_lead2)d)]"/>
        <filter string="Proposition" name="stage_id"
                domain="[('stage_id', '=', %(crm.stage_lead3)d)]"/>
        <filter string="Won" name="stage_id"
                domain="[('stage_id', '=', %(crm.stage_lead4)d)]"/>
      </search>
    </field>
  </record>

  <record id="somconnexio.action_crm_lead_line_broadband" model="ir.actions.act_window">
	  <field name="search_view_id" ref="somconnexio.crm_lead_line_search_view"/>
	</record>

  <record id="somconnexio.action_crm_lead_line_mobile" model="ir.actions.act_window">
	  <field name="search_view_id" ref="somconnexio.crm_lead_line_search_view"/>
	</record>
</odoo>
