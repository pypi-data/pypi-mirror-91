(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[218],{1885:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(9),a=n.n(r),i=n(10),c=n.n(i),o=n(11),l=n.n(o),s=n(13),u=n.n(s),f=n(5),b=n.n(f),d=(n(1),n(259)),y=n.n(d),p=n(423),O=n(0);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var j=function(e){l()(n,e);var t=h(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(O.f)(y.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),n}(p.a);j.displayName="AsyncView"},1886:function(e,t,n){"use strict";var r=n(15),a=n.n(r),i=n(9),c=n.n(i),o=n(10),l=n.n(o),s=n(11),u=n.n(s),f=n(13),b=n.n(f),d=n(5),y=n.n(d),p=n(3),O=n(1),h=n.n(O),j=n(217),v=n(7),g=n(0);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var k=function(e){u()(n,e);var t=m(n);function n(){return c()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.subtitle,i=e.action,c=e.tabs,o=e.noTitleStyles,l=e.body,s=a()(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),u=!r;return Object(g.f)("div",s,Object(g.f)(R,{isNarrow:u},Object(g.f)(S,null,t&&Object(g.f)(P,null,t),n&&Object(g.f)(w,{tabs:c,styled:o},Object(g.f)(j.a,null,n),r&&Object(g.f)(D,null,r))),i&&Object(g.f)(x,{isNarrow:u},i)),l&&Object(g.f)(z,null,l),c&&Object(g.f)(C,null,c))}}]),n}(h.a.Component);k.displayName="UnstyledSettingsPageHeader",k.defaultProps={noTitleStyles:!1};var R=Object(p.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),S=Object(p.a)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),w=Object(p.a)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",Object(v.a)(4)," ",Object(v.a)(2)," ",Object(v.a)(3)," 0;"),D=Object(p.a)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",Object(v.a)(1.5)," 0 0;"),P=Object(p.a)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",Object(v.a)(1),";"),x=Object(p.a)("div",{target:"e1uay4fd5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":Object(v.a)(4)}),";"),K=Object(p.a)(k,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",Object(v.a)(4),";"),z=Object(p.a)("div",{target:"e1uay4fd7",label:"BodyWrapper"})("flex:1;margin:0 0 ",Object(v.a)(3),";"),C=Object(p.a)("div",{target:"e1uay4fd8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});t.a=K},2009:function(e,t,n){"use strict";var r=n(6),a=n.n(r),i=n(15),c=n.n(i),o=(n(1),n(425)),l=n(70),s=n(16),u=n(4),f=n(0),b=function(e){var t=e.access,n=void 0===t?["org:write"]:t,r=c()(e,["access"]);return Object(f.f)(o.a,{access:n},(function(e){return!e.hasAccess&&Object(f.f)(l.b,a()({type:"warning",icon:Object(f.f)(s.Hb,{size:"sm"})},r),Object(u.b)("These settings can only be edited by users with the organization owner or manager role."))}))};b.displayName="PermissionAlert",t.a=b},2178:function(e,t,n){"use strict";var r=n(6),a=n.n(r),i=n(15),c=n.n(i),o=n(1),l=n.n(o),s=n(70),u=n(139),f=n(4),b=n(220),d=n(701),y=n(0),p=function(e){var t=e.message,n=e.confirmInput,r=c()(e,["message","confirmInput"]);return Object(y.f)(u.a,a()({},r,{bypass:!1,disableConfirmButton:!0,renderMessage:function(e){var r=e.disableConfirmButton;return Object(y.f)(l.a.Fragment,null,Object(y.f)(s.b,{type:"error"},t),Object(y.f)(d.a,{flexibleControlStateSize:!0,inline:!1,label:Object(f.b)("Please enter %s to confirm the deletion",Object(y.f)("code",null,n))},Object(y.f)(b.a,{type:"text",placeholder:n,onChange:function(e){return r(e.target.value!==n)}})))}}))};p.displayName="ConfirmDelete",t.a=p},2828:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n.n(r),i=n(15),c=n.n(i),o=n(1),l=n.n(o),s=n(113),u=n(435),f=n(118),b=n(4),d=n(58),y=n(8),p=n.n(y),O=n(22),h=n.n(O),j=n(30),v=n.n(j),g=n(9),m=n.n(g),k=n(10),R=n.n(k),S=n(126),w=n.n(S),D=n(11),P=n.n(D),x=n(13),K=n.n(x),z=n(5),C=n.n(z),N=n(3),F=n(60),T=n.n(F),A=n(114),V=n.n(A),E=n(34),L=n(62),q=n(439),M=n(26),W=n(53),B=n(16),I=n(1885),U=n(1886),H=n(699),J=n(2009),Y=n(24),G=n.n(Y),X=n(450),$=n(7),_=n(220),Q=n(1056),Z=n(701),ee=n(783),te=n(704),ne=n(0),re=function(e){var t,n=e.values,r=e.onChange,a=e.errors,i=e.onValidate,c=e.isFormValid,o=e.disables,l=e.onValidateKey,s=e.onSave,u=function(e){return function(t){r(e,t.target.value)}};return Object(ne.f)("form",{onSubmit:function(){c&&s()},id:"relay-form"},Object(ne.f)(Z.a,{flexibleControlStateSize:!0,label:Object(b.b)("Display Name"),error:a.name,inline:!1,stacked:!0,required:!0},Object(ne.f)(_.a,{type:"text",name:"name",placeholder:Object(b.b)("Display Name"),onChange:u("name"),value:n.name,onBlur:i("name"),disabled:o.name})),o.publicKey?Object(ne.f)(Z.a,{flexibleControlStateSize:!0,label:Object(b.b)("Public Key"),inline:!1,stacked:!0},Object(ne.f)(te.a,{onCopy:(t=n.publicKey,v()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))))},n.publicKey)):Object(ne.f)(Z.a,{label:Object(b.b)("Public Key"),error:a.publicKey,flexibleControlStateSize:!0,inline:!1,stacked:!0,required:!0},Object(ne.f)(_.a,{type:"text",name:"publicKey",placeholder:Object(b.b)("Public Key"),onChange:u("publicKey"),value:n.publicKey,onBlur:l}),Object(ne.f)(ee.a,null,Object(b.b)("Only enter the Public Key value from your credentials file. Never share the Secret key with Sentry or any third party"))),Object(ne.f)(Z.a,{flexibleControlStateSize:!0,label:Object(b.b)("Description"),inline:!1,stacked:!0},Object(ne.f)(Q.a,{name:"description",placeholder:Object(b.b)("Description"),onChange:u("description"),value:n.description,disabled:o.description})))};re.displayName="Form";var ae=re;var ie=function(e){var t,n=null===(t=e.responseJSON)||void 0===t?void 0:t.trustedRelays[0];return n?"Bad structure received for Trusted Relays"===n?{type:"bad-structure",message:Object(b.b)("An invalid structure was sent.")}:"Relay key info with missing name in Trusted Relays"===n?{type:"missing-name",message:Object(b.b)("Field Required")}:"Relay key info with empty name in Trusted Relays"===n?{type:"empty-name",message:Object(b.b)("Invalid Field")}:n.startsWith("Missing public key for Relay key info with name:")?{type:"missing-key",message:Object(b.b)("Field Required")}:n.startsWith("Invalid public key for relay key info with name:")?{type:"invalid-key",message:Object(b.b)("Invalid Relay key")}:n.startsWith("Duplicated key in Trusted Relays:")?{type:"duplicated-key",message:Object(b.b)("Relay key already taken")}:{type:"unknown",message:Object(b.b)("An unknown error occurred while saving Relay public key.")}:{type:"unknown",message:Object(b.b)("An unknown error occurred while saving Relay public key.")}},ce=n(81),oe=function(e){var t=e.title,n=e.onSave,r=e.content,a=e.disabled,i=e.Header,c=e.Body,o=e.Footer,s=e.closeModal,u=e.btnSaveLabel,f=void 0===u?Object(b.b)("Save"):u;return Object(ne.f)(l.a.Fragment,null,Object(ne.f)(i,{closeButton:!0},t),Object(ne.f)(c,null,r),Object(ne.f)(o,null,Object(ne.f)(ce.a,{gap:1.5},Object(ne.f)(M.b,{onClick:s},Object(b.b)("Cancel")),Object(ne.f)(M.b,{onClick:function(e){e.preventDefault(),n()},disabled:a,type:"submit",priority:"primary",form:"relay-form"},f))))};oe.displayName="Modal";var le=oe;function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return K()(this,n)}}var be=function(e){P()(n,e);var t=fe(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state=e.getDefaultState(),e.handleChange=function(t,n){e.setState((function(e){return{values:ue(ue({},e.values),{},p()({},t,n)),errors:V()(e.errors,t)}}))},e.handleSave=v()(h.a.mark((function t(){var n,r,a,i,c,o,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.onSubmitSuccess,a=n.closeModal,i=n.orgSlug,c=n.api,o=e.getData().trustedRelays.map((function(e){return V()(e,["created","lastModified"])})),t.prev=2,t.next=5,c.requestPromise("/organizations/".concat(i,"/"),{method:"PUT",data:{trustedRelays:o}});case 5:l=t.sent,r(l),a(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),e.convertErrorXhrResponse(ie(t.t0));case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),e.handleValidate=function(t){return function(){var n=!e.state.values[t].replace(/\s/g,""),r=e.state.errors[t];n&&r||(!n||r?!n&&r&&e.clearError(t):e.setState((function(e){return{errors:ue(ue({},e.errors),{},p()({},t,Object(b.b)("Field Required")))}})))}},e.handleValidateKey=function(){var t=e.props.savedRelays,n=e.state,r=n.values,a=n.errors;!t.find((function(e){return e.publicKey===r.publicKey}))||a.publicKey?(a.publicKey&&e.setState({errors:V()(a,"publicKey")}),e.handleValidate("publicKey")()):e.setState({errors:ue(ue({},a),{},{publicKey:Object(b.b)("Relay key already taken")})})},e}return R()(n,[{key:"componentDidMount",value:function(){this.validateForm()}},{key:"componentDidUpdate",value:function(e,t){T()(t.values,this.state.values)||this.validateForm(),!T()(t.errors,this.state.errors)&&Object.keys(this.state.errors).length>0&&this.setValidForm(!1)}},{key:"getDefaultState",value:function(){return{values:{name:"",publicKey:"",description:""},requiredValues:["name","publicKey"],errors:{},disables:{},isFormValid:!1,title:this.getTitle()}}},{key:"getTitle",value:function(){return""}},{key:"getData",value:function(){throw new Error("Not implemented")}},{key:"getBtnSaveLabel",value:function(){}},{key:"setValidForm",value:function(e){this.setState({isFormValid:e})}},{key:"validateForm",value:function(){var e=this.state,t=e.values,n=e.requiredValues,r=e.errors,a=n.every((function(e){return!!t[e].replace(/\s/g,"")&&!r[e]}));this.setValidForm(a)}},{key:"clearError",value:function(e){this.setState((function(t){return{errors:V()(t.errors,e)}}))}},{key:"convertErrorXhrResponse",value:function(e){switch(e.type){case"invalid-key":case"missing-key":this.setState((function(t){return{errors:ue(ue({},t.errors),{},{publicKey:e.message})}}));break;case"empty-name":case"missing-name":this.setState((function(t){return{errors:ue(ue({},t.errors),{},{name:e.message})}}));break;default:Object(E.a)(e.message)}}},{key:"getForm",value:function(){var e=this.state,t=e.values,n=e.errors,r=e.disables,a=e.isFormValid;return Object(ne.f)(ae,{isFormValid:a,onSave:this.handleSave,onChange:this.handleChange,onValidate:this.handleValidate,onValidateKey:this.handleValidateKey,errors:n,values:t,disables:r})}},{key:"getContent",value:function(){return this.getForm()}},{key:"render",value:function(){var e=this.state,t=e.title,n=e.isFormValid,r=this.getBtnSaveLabel(),i=this.getContent();return Object(ne.f)(le,a()({},this.props,{title:t,onSave:this.handleSave,btnSaveLabel:r,disabled:!n,content:i}))}}]),n}(l.a.Component);be.displayName="DialogManager";var de=be,ye=n(449),pe=Object(N.a)((function(e){var t=e.title,n=e.subtitle,r=e.children,a=e.className;return Object(ne.f)(ye.a,{className:a},t,n&&Object(ne.f)("small",null,n),Object(ne.f)("div",null,r))}),{target:"emhqto00",label:"Item"})("display:grid;grid-gap:",Object($.a)(1.5),";"),Oe=function(e){var t=e.command;return Object(ne.f)(je,null,Object(ne.f)(ve,null,"$"),t)};Oe.displayName="Terminal";var he=Oe,je=Object(N.a)("div",{target:"e1i4f0j90",label:"Wrapper"})("background:",(function(e){return e.theme.gray500}),";padding:",Object($.a)(1.5)," ",Object($.a)(3),";font-family:",(function(e){return e.theme.text.familyMono}),";color:",(function(e){return e.theme.white}),";border-radius:",(function(e){return e.theme.borderRadius}),";display:grid;grid-template-columns:max-content 1fr;grid-gap:",Object($.a)(.75),";"),ve=Object(N.a)("div",{target:"e1i4f0j91",label:"Prompt"})("color:",(function(e){return e.theme.gray300}),";");function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return K()(this,n)}}var me=function(e){P()(n,e);var t=ge(n);function n(){return m()(this,n),t.apply(this,arguments)}return R()(n,[{key:"getTitle",value:function(){return Object(b.b)("Register Key")}},{key:"getBtnSaveLabel",value:function(){return Object(b.b)("Register")}},{key:"getData",value:function(){var e=this.props.savedRelays;return{trustedRelays:[].concat(G()(e),[this.state.values])}}},{key:"getContent",value:function(){return Object(ne.f)(ke,{symbol:"colored-numeric"},Object(ne.f)(pe,{title:Object(b.c)("Initialize the configuration. [link: Learn how]",{link:Object(ne.f)(W.a,{href:"https://docs.sentry.io/product/relay/getting-started/#initializing-configuration"})}),subtitle:Object(b.b)("Within your terminal:")},Object(ne.f)(he,{command:"relay config init"})),Object(ne.f)(pe,{title:Object(b.c)("Go to the file [jsonFile: credentials.json] to find the public key and enter it below.",{jsonFile:Object(ne.f)(Re,{href:"https://docs.sentry.io/product/relay/getting-started/#registering-relay-with-sentry"})})},w()(C()(n.prototype),"getForm",this).call(this)))}}]),n}(de),ke=Object(N.a)(X.a,{target:"e11lw50d0",label:"StyledList"})("display:grid;grid-gap:",Object($.a)(3),";"),Re=Object(N.a)(W.a,{target:"e11lw50d1",label:"CredentialsLink"})("color:",(function(e){return e.theme.active}),";:hover{color:",(function(e){return e.theme.active}),";}");function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return K()(this,n)}}var Pe=function(e){P()(n,e);var t=De(n);function n(){return m()(this,n),t.apply(this,arguments)}return R()(n,[{key:"getDefaultState",value:function(){return we(we({},w()(C()(n.prototype),"getDefaultState",this).call(this)),{},{values:{name:this.props.relay.name,publicKey:this.props.relay.publicKey,description:this.props.relay.description||""},disables:{publicKey:!0}})}},{key:"getTitle",value:function(){return Object(b.b)("Edit Key")}},{key:"getData",value:function(){var e=this.props.savedRelays,t=this.state.values;return{trustedRelays:e.map((function(e){return e.publicKey===t.publicKey?t:e}))}}}]),n}(de),xe=n(426),Ke=function(){return Object(ne.f)(f.a,null,Object(ne.f)(xe.a,null,Object(b.b)("No Keys Registered.")))};Ke.displayName="EmptyState";var ze=Ke,Ce=n(529),Ne=n.n(Ce),Fe=n(700),Te=function(e){var t=e.activities;return Object(ne.f)(Ve,{headers:[Object(b.b)("Version"),Object(b.b)("First Used"),Object(b.b)("Last Used")]},t.map((function(e){var t=e.relayId,n=e.version,r=e.firstSeen,a=e.lastSeen;return Object(ne.f)(l.a.Fragment,{key:t},Object(ne.f)("div",null,n),Object(ne.f)(Fe.a,{date:r,seconds:!1}),Object(ne.f)(Fe.a,{date:a,seconds:!1}))})))};Te.displayName="ActivityList";var Ae=Te,Ve=Object(N.a)(f.g,{target:"eeq3cnj0",label:"StyledPanelTable"})("grid-template-columns:repeat(3,2fr);@media (min-width:",(function(e){return e.theme.breakpoints[2]}),"){grid-template-columns:2fr repeat(2,1fr);}"),Ee=n(263),Le=n(2178),qe=n(314),Me=function(e){var t=e.publicKey,n=e.name,r=e.description,a=e.created,i=e.disabled,c=e.onEdit,o=e.onDelete,l=Object(ne.f)(M.b,{size:"small",icon:Object(ne.f)(B.r,null),label:Object(b.b)("Delete Key"),disabled:i,title:i?Object(b.b)("You do not have permission to delete keys"):void 0});return Object(ne.f)(He,null,Object(ne.f)(Ie,null,Object(ne.f)(Be,null,Object(ne.f)("div",null,n),r&&Object(ne.f)(qe.a,{position:"top",size:"sm",title:r})),Object(ne.f)(Ue,null,Object(b.c)("Created on [date]",{date:Object(ne.f)(Fe.a,{date:a,timeAndDate:!0})}))),Object(ne.f)(ce.a,{gap:1},Object(ne.f)(Ee.a,{value:t},Object(ne.f)(M.b,{size:"small",icon:Object(ne.f)(B.q,null)},Object(b.b)("Copy Key"))),Object(ne.f)(M.b,{size:"small",onClick:c(t),icon:Object(ne.f)(B.u,null),label:Object(b.b)("Edit Key"),disabled:i,title:i?Object(b.b)("You do not have permission to edit keys"):void 0}),i?l:Object(ne.f)(Le.a,{message:Object(b.b)("After removing this Public Key, your Relay will no longer be able to communicate with Sentry and events will be dropped."),onConfirm:o(t),confirmInput:n},l)))};Me.displayName="CardHeader";var We=Me,Be=Object(N.a)("div",{target:"e5hz7hr0",label:"Name"})("display:grid;grid-template-columns:max-content 1fr;grid-gap:",Object($.a)(.5),";"),Ie=Object(N.a)("div",{target:"e5hz7hr1",label:"MainInfo"})("color:",(function(e){return e.theme.textColor}),";display:grid;grid-gap:",Object($.a)(1),";"),Ue=Object(N.a)("small",{target:"e5hz7hr2",label:"Date"})("color:",(function(e){return e.theme.gray300}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";"),He=Object(N.a)("div",{target:"e5hz7hr3",label:"Header"})("display:grid;grid-gap:",Object($.a)(1),";align-items:flex-start;@media (min-width:",(function(e){return e.theme.breakpoints[0]}),"){grid-template-columns:1fr max-content;}");var Je=function(e){var t=e.children;return Object(ne.f)(Ge,null,t)};Je.displayName="CommandLine";var Ye=Je,Ge=Object(N.a)("code",{target:"encb4l0",label:"Wrapper"})("padding:",Object($.a)(.5)," ",Object($.a)(1),";color:",(function(e){return e.theme.pink300}),";background:",(function(e){return e.theme.pink100}),";border:1px solid ",(function(e){return e.theme.pink200}),";font-family:",(function(e){return e.theme.text.familyMono}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";white-space:nowrap;"),Xe=function(e){var t=e.onRefresh,n=e.disabled;return Object(ne.f)(f.a,null,Object(ne.f)(xe.a,{title:Object(b.b)("Waiting on Activity!"),description:n?void 0:Object(b.c)("Run relay in your terminal with [commandLine]",{commandLine:Object(ne.f)(Ye,null,"relay run")}),action:Object(ne.f)(M.b,{icon:Object(ne.f)(B.ib,null),onClick:t},Object(b.b)("Refresh"))}))};Xe.displayName="WaitingActivity";var $e=Xe,_e=function(e){var t=e.relays,n=e.relayActivities,r=e.onRefresh,a=e.onDelete,i=e.onEdit,c=e.disabled,o=function(e,t){return e.reduce((function(e,n){var r=n.name,a=n.description,i=n.created,c=n.publicKey;return e.hasOwnProperty(c)||(e[c]={name:r,description:a,created:i,activities:[]}),e[c].activities.length||(e[c].activities=t.filter((function(e){return e.publicKey===c}))),e}),{})}(Ne()(t,(function(e){return e.created}),["desc"]),n);return Object(ne.f)(Ze,null,Object.keys(o).map((function(e){var t=o[e],n=t.name,l=t.description,s=t.created,u=t.activities;return Object(ne.f)(et,{key:e},Object(ne.f)(We,{publicKey:e,name:n,description:l,created:s,onEdit:i,onDelete:a,disabled:c}),function(e){return e.length?Object(ne.f)(Ae,{activities:e}):Object(ne.f)($e,{onRefresh:r,disabled:c})}(u))})))};_e.displayName="List";var Qe=_e,Ze=Object(N.a)("div",{target:"e1nk16xu0",label:"Wrapper"})("display:grid;grid-gap:",Object($.a)(3),";"),et=Object(N.a)("div",{target:"e1nk16xu1",label:"Card"})("display:grid;grid-gap:",Object($.a)(1),";");function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return K()(this,n)}}var at=function(e){P()(n,e);var t=rt(n);function n(){var e;m()(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).handleDelete=function(t){return v()(h.a.mark((function n(){var r,a,i;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.state.relays,a=r.filter((function(e){return e.publicKey!==t})).map((function(e){return V()(e,["created","lastModified"])})),n.prev=2,n.next=5,e.api.requestPromise("/organizations/".concat(e.props.organization.slug,"/"),{method:"PUT",data:{trustedRelays:a}});case 5:i=n.sent,Object(E.d)(Object(b.b)("Successfully deleted Relay public key")),e.setRelays(i.trustedRelays),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),Object(E.a)(Object(b.b)("An unknown error occurred while deleting Relay public key"));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))},e.handleOpenEditDialog=function(t){return function(){var n=e.state.relays.find((function(e){return e.publicKey===t}));n&&Object(L.j)((function(t){return Object(ne.f)(Pe,a()({},t,{savedRelays:e.state.relays,api:e.api,orgSlug:e.props.organization.slug,relay:n,onSubmitSuccess:function(t){e.successfullySaved(t,Object(b.b)("Successfully updated Relay public key"))}}))}))}},e.handleOpenAddDialog=function(){Object(L.j)((function(t){return Object(ne.f)(me,a()({},t,{savedRelays:e.state.relays,api:e.api,orgSlug:e.props.organization.slug,onSubmitSuccess:function(t){e.successfullySaved(t,Object(b.b)("Successfully added Relay public key"))}}))}))},e.handleRefresh=function(){e.fetchData()},e}return R()(n,[{key:"componentDidUpdate",value:function(e,t){T()(t.relays,this.state.relays)||(this.fetchData(),Object(q.h)(nt(nt({},e.organization),{},{trustedRelays:this.state.relays}))),w()(C()(n.prototype),"componentDidUpdate",this).call(this,e,t)}},{key:"getTitle",value:function(){return Object(b.b)("Relay")}},{key:"getDefaultState",value:function(){return nt(nt({},w()(C()(n.prototype),"getDefaultState",this).call(this)),{},{relays:this.props.organization.trustedRelays})}},{key:"getEndpoints",value:function(){var e=this.props.organization;return[["relayActivities","/organizations/".concat(e.slug,"/relay_usage/")]]}},{key:"setRelays",value:function(e){this.setState({relays:e})}},{key:"successfullySaved",value:function(e,t){Object(E.d)(t),this.setRelays(e.trustedRelays)}},{key:"renderContent",value:function(e){var t=this.state,n=t.relays,r=t.relayActivities;return t.loading?this.renderLoading():n.length?Object(ne.f)(Qe,{relays:n,relayActivities:r,onEdit:this.handleOpenEditDialog,onRefresh:this.handleRefresh,onDelete:this.handleDelete,disabled:e}):Object(ne.f)(ze,null)}},{key:"renderBody",value:function(){var e=!this.props.organization.access.includes("org:write");return Object(ne.f)(l.a.Fragment,null,Object(ne.f)(U.a,{title:Object(b.b)("Relay"),action:Object(ne.f)(M.b,{title:e?Object(b.b)("You do not have permission to register keys"):void 0,priority:"primary",size:"small",icon:Object(ne.f)(B.b,{size:"xs",isCircled:!0}),onClick:this.handleOpenAddDialog,disabled:e},Object(b.b)("Register Key"))}),Object(ne.f)(J.a,null),Object(ne.f)(it,null,Object(b.b)("Sentry Relay offers enterprise-grade data security by providing a standalone service that acts as a middle layer between your application and sentry.io.")),Object(ne.f)(H.a,null,Object(b.c)("Go to [link:Relay Documentation] for setup and details.",{link:Object(ne.f)(W.a,{href:"https://getsentry.github.io/relay/"})})),this.renderContent(e))}}]),n}(I.a),it=Object(N.a)(H.a,{target:"ecjys5m0",label:"StyledTextBlock"})({name:"1274r9c",styles:"max-width:600px;"}),ct=function(e){var t=e.organization,n=c()(e,["organization"]);return Object(ne.f)(s.a,{features:["relay"],organization:t,renderDisabled:function(){return Object(ne.f)(u.a,{alert:f.b,features:t.features,featureName:Object(b.b)("Relay")})}},Object(ne.f)(at,a()({organization:t},n)))};ct.displayName="OrganizationRelay";t.default=Object(d.a)(ct)}}]);
//# sourceMappingURL=organizationRelay.js.map