(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[98],{2095:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var r=n(8),i=n.n(r),o=n(9),a=n.n(o),c=n(10),s=n.n(c),l=n(11),u=n.n(l),d=n(13),f=n.n(d),p=n(5),g=n.n(p),b=n(1),m=n.n(b),v=n(71),h=n(34),y=n(4),O=n(165);function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g()(t);if(e){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var k=function(t){u()(n,t);var e=I(n);function n(){var t;a()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).dialog=null,t.openDialog=function(e){var n=t.props.integrationId;Object(O.m)(w({eventKey:n?"integrations.reauth_start":"integrations.installation_start",eventName:n?"Integrations: Reauth Start":"Integrations: Installation Start",integration:t.props.provider.key,integration_type:"first_party"},t.props.analyticsParams),t.props.organization);var r=t.props.provider.setupDialog,i=r.url,o=r.width,a=r.height,c=t.computeCenteredWindow(o,a),s=c.left,l=c.top,u=w({},e);n&&(u.integration_id=n),t.props.account&&(u.account=t.props.account);var d="".concat(i,"?").concat(v.stringify(u)),f="scrollbars=yes,width=".concat(o,",height=").concat(a,",top=").concat(l,",left=").concat(s);t.dialog=window.open(d,"sentryAddIntegration",f),t.dialog&&t.dialog.focus()},t.didReceiveMessage=function(e){var n=t.props.integrationId;if(e.origin===document.location.origin&&e.source===t.dialog){var r=e.data,i=r.success,o=r.data;t.dialog=null,i?o&&(Object(O.m)(w({eventKey:n?"integrations.reauth_complete":"integrations.installation_complete",eventName:n?"Integrations: Reauth Complete":"Integrations: Installation Complete",integration:t.props.provider.key,integration_type:"first_party"},t.props.analyticsParams),t.props.organization),Object(h.d)(Object(y.b)("%s added",t.props.provider.name)),t.props.onInstall(o)):Object(h.a)(o.error)}},t}return s()(n,[{key:"componentDidMount",value:function(){window.addEventListener("message",this.didReceiveMessage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.didReceiveMessage),this.dialog&&this.dialog.close()}},{key:"computeCenteredWindow",value:function(t,e){var n=void 0!==window.screenLeft?window.screenLeft:window.screenX,r=void 0!==window.screenTop?window.screenTop:window.screenY;return{left:(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-t/2+n,top:(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-e/2+r}}},{key:"render",value:function(){return this.props.children(this.openDialog)}}]),n}(m.a.Component);k.displayName="AddIntegration"},2127:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var r=n(9),i=n.n(r),o=n(10),a=n.n(o),c=n(11),s=n.n(c),l=n(13),u=n.n(l),d=n(5),f=n.n(d),p=n(3),g=n(1),b=n.n(g),m=n(7),v=n(1911),h=n(0);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f()(t);if(e){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u()(this,n)}}var O=Object(p.a)("img",{target:"e18es4220",label:"StyledIcon"})("height:",(function(t){return t.size}),"px;width:",(function(t){return t.size}),"px;border-radius:2px;display:block;"),j=function(t){s()(n,t);var e=y(n);function n(){var t;i()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).state={imgSrc:t.props.integration.icon},t}return a()(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.integration,r=e.size;return Object(h.f)(O,{size:r,src:this.state.imgSrc,onError:function(){t.setState({imgSrc:v.b[n.provider.key]||v.a})}})}}]),n}(b.a.Component);j.displayName="Icon";var w=function(t){var e=t.integration,n=t.size,r=void 0===n?32:n;return e.icon?Object(h.f)(j,{size:r,integration:e}):Object(h.f)(v.c,{size:r,pluginId:e.provider.key})};function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f()(t);if(e){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u()(this,n)}}var k=function(t){s()(n,t);var e=I(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"render",value:function(){var t=this.props,e=t.integration,n=t.compact;return Object(h.f)(R,null,Object(h.f)("div",null,Object(h.f)(w,{size:n?22:32,integration:e})),Object(h.f)(x,{compact:n},Object(h.f)(z,{"data-test-id":"integration-name"},e.name),Object(h.f)(D,{compact:n},e.domainName)))}}]),n}(b.a.Component);k.displayName="IntegrationItem",k.defaultProps={compact:!1};var R=Object(p.a)("div",{target:"e5rwe00",label:"Flex"})({name:"k008qs",styles:"display:flex;"}),x=Object(p.a)("div",{target:"e5rwe01",label:"Labels"})("box-sizing:border-box;display:flex;",(function(t){return t.compact?"align-items: center;":""}),";flex-direction:",(function(t){return t.compact?"row":"column"}),";padding-left:",Object(m.a)(1),";min-width:0;justify-content:center;"),z=Object(p.a)("div",{target:"e5rwe02",label:"IntegrationName"})({name:"1nedsoq",styles:"font-size:1.6rem;"}),D=Object(p.a)("div",{target:"e5rwe03",label:"DomainName"})("color:",(function(t){return t.compact?t.theme.gray200:t.theme.gray400}),";margin-left:",(function(t){return t.compact?Object(m.a)(1):"inherit"}),";margin-top:",(function(t){return t.compact?"inherit":Object(m.a)(.25)}),";font-size:1.4rem;line-height:1.2;overflow:hidden;text-overflow:ellipsis;")},2864:function(t,e,n){"use strict";n.r(e);var r=n(8),i=n.n(r),o=n(6),a=n.n(o),c=n(29),s=n.n(c),l=n(24),u=n.n(l),d=n(9),f=n.n(d),p=n(10),g=n.n(p),b=n(11),m=n.n(b),v=n(13),h=n.n(v),y=n(5),O=n.n(y),j=n(3),w=n(1),I=n.n(w),k=n(34),R=n(113),x=n(70),z=n(26),D=n(16),P=n(4),S=n(7),E=n(165),_=n(58),C=n(2153),T=n(15),A=n.n(T),N=n(32),B=n(2095),U=n(0);function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O()(t);if(e){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var q=function(t){m()(n,t);var e=W(n);function n(){return f()(this,n),e.apply(this,arguments)}return g()(n,[{key:"render",value:function(){var t=this.props,e=t.provider,n=t.buttonText,r=t.onAddIntegration,i=t.organization,o=t.reinstall,c=t.integrationId,s=t.analyticsParams,l=A()(t,["provider","buttonText","onAddIntegration","organization","reinstall","integrationId","analyticsParams"]),u=n||Object(P.b)(o?"Enable":"Add %s",e.metadata.noun);return Object(U.f)(N.a,{disabled:e.canAdd,title:"Integration cannot be added on Sentry. Enable this integration via the ".concat(e.name," instance.")},Object(U.f)(B.a,{provider:e,onInstall:r,organization:i,analyticsParams:s,integrationId:c},(function(t){return Object(U.f)(z.b,a()({disabled:!e.canAdd},l,{onClick:function(){return t()}}),u)})))}}]),n}(I.a.Component);q.displayName="AddIntegrationButton";var F=n(425),H=n(719),L=n(139),M=n(31),K=n(2127);function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O()(t);if(e){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var J=function(t){m()(n,t);var e=Y(n);function n(){var t;f()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).handleReAuthIntegration=function(e){t.props.onReAuthIntegration(e)},t.handleUninstallClick=function(){t.props.trackIntegrationEvent({eventKey:"integrations.uninstall_clicked",eventName:"Integrations: Uninstall Clicked"})},t}return g()(n,[{key:"getRemovalBodyAndText",value:function(t){return t&&t.removal_dialog?{body:t.removal_dialog.body,actionText:t.removal_dialog.actionText}:{body:Object(P.b)("Deleting this integration will remove any project associated data. This action cannot be undone. Are you sure you want to delete this integration?"),actionText:Object(P.b)("Delete")}}},{key:"handleRemove",value:function(t){this.props.onRemove(t),this.props.trackIntegrationEvent({eventKey:"integrations.uninstall_completed",eventName:"Integrations: Uninstall Completed"})}},{key:"render",value:function(){var t=this,e=this.props,n=e.className,r=e.integration,i=e.provider,o=e.organization,c=e.showReauthMessage,s="active"===r.status&&r.provider.canDisable?this.disableConfirmProps:this.removeConfirmProps;return Object(U.f)(F.a,{access:["org:integrations"]},(function(e){var l=e.hasAccess;return Object(U.f)(X,{key:r.id,className:n},Object(U.f)(G,null,Object(U.f)(K.a,{integration:r})),Object(U.f)("div",null,c&&Object(U.f)(N.a,{disabled:l,title:Object(P.b)("You must be an organization owner, manager or admin to upgrade")},Object(U.f)(q,{disabled:!l,provider:i,onAddIntegration:t.handleReAuthIntegration,integrationId:r.id,priority:"primary",size:"small",buttonText:Object(P.b)("Upgrade Now"),organization:o,icon:Object(U.f)(D.Hb,{size:"sm"})})),Object(U.f)(N.a,{disabled:l,position:"left",title:Object(P.b)("You must be an organization owner, manager or admin to configure")},Object(U.f)(V,{borderless:!0,icon:Object(U.f)(D.nb,null),disabled:!l||"active"!==r.status,to:"/settings/".concat(o.slug,"/integrations/").concat(i.key,"/").concat(r.id,"/"),"data-test-id":"integration-configure-button"},Object(P.b)("Configure")))),Object(U.f)("div",null,Object(U.f)(N.a,{disabled:l,title:Object(P.b)("You must be an organization owner, manager or admin to uninstall")},Object(U.f)(L.a,a()({priority:"danger",onConfirming:t.handleUninstallClick,disabled:!l},s),Object(U.f)(V,{disabled:!l,borderless:!0,icon:Object(U.f)(D.r,null),"data-test-id":"integration-remove-button"},Object(P.b)("Uninstall"))))),Object(U.f)(Q,{status:r.status}))}))}},{key:"removeConfirmProps",get:function(){var t=this,e=this.props.integration,n=this.getRemovalBodyAndText(e.provider.aspects),r=n.body,i=n.actionText;return{message:Object(U.f)(I.a.Fragment,null,Object(U.f)(x.b,{type:"error",icon:Object(U.f)(D.B,{size:"md"})},Object(P.b)("Deleting this integration has consequences!")),r),confirmText:i,onConfirm:function(){return t.handleRemove(e)}}}},{key:"disableConfirmProps",get:function(){var t=this,e=this.props.integration,n=e.provider.aspects.disable_dialog||{},r=n.body,i=n.actionText;return{message:Object(U.f)(I.a.Fragment,null,Object(U.f)(x.b,{type:"error",icon:Object(U.f)(D.B,{size:"md"})},Object(P.b)("This integration cannot be removed in Sentry")),r),confirmText:i,onConfirm:function(){return t.props.onDisable(e)}}}}]),n}(I.a.Component);J.displayName="InstalledIntegration";var V=Object(j.a)(z.b,{target:"eau7gon0",label:"StyledButton"})("color:",(function(t){return t.theme.gray300}),";"),X=Object(j.a)("div",{target:"eau7gon1",label:"IntegrationFlex"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),G=Object(j.a)("div",{target:"eau7gon2",label:"IntegrationItemBox"})({name:"1rr4qq7",styles:"flex:1;"}),Q=Object(j.a)((function(t){var e=t.status,n=A()(t,["status"]),r="active"===e?M.b.success:M.b.gray300,i="active"===e?Object(P.b)("This Integration can be disabled by clicking the Uninstall button"):Object(P.b)("This Integration has been disconnected from the external provider");return Object(U.f)(N.a,{title:i},Object(U.f)("div",n,Object(U.f)(H.a,{size:6,color:r}),Object(U.f)(Z,null,"".concat("active"===e?Object(P.b)("enabled"):Object(P.b)("disabled")))))}),{target:"eau7gon3",label:"IntegrationStatus"})("display:flex;align-items:center;color:",(function(t){return t.theme.gray300}),";font-weight:light;text-transform:capitalize;&:before{content:'|';color:",(function(t){return t.theme.gray200}),";margin-right:",Object(S.a)(1),";font-weight:normal;}"),Z=Object(j.a)("div",{target:"eau7gon4",label:"IntegrationStatusText"})("margin:0 ",Object(S.a)(.75)," 0 ",Object(S.a)(.5),";");function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O()(t);if(e){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var nt=function(t){m()(n,t);var e=et(n);function n(){var t;f()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).onInstall=function(e){var n=t.props.params.orgId;t.props.router.push("/settings/".concat(n,"/integrations/").concat(e.provider.key,"/").concat(e.id,"/"))},t.onRemove=function(e){var n=t.props.params.orgId,r=u()(t.state.configurations),i=t.state.configurations.filter((function(t){return t.id!==e.id}));t.setState({configurations:i});var o={method:"DELETE",error:function(){t.setState({configurations:r}),Object(k.a)(Object(P.b)("Failed to remove Integration"))}};t.api.request("/organizations/".concat(n,"/integrations/").concat(e.id,"/"),o)},t.onDisable=function(t){var e,n,r,i=null===(e=t.dynamicDisplayInformation)||void 0===e?void 0:null===(n=e.integration_detail)||void 0===n?void 0:n.uninstallationUrl;if(i)r=i;else{var o=t.domainName.split("/"),a=s()(o,2),c=a[0],l=a[1];r="User"===t.accountType?"https://".concat(c,"/settings/installations/"):"https://".concat(c,"/organizations/").concat(l,"/settings/installations/")}window.open(r,"_blank")},t.handleExternalInstall=function(){t.trackIntegrationEvent({eventKey:"integrations.installation_start",eventName:"Integrations: Installation Start"})},t}return g()(n,[{key:"getEndpoints",value:function(){var t=this.props.params,e=t.orgId,n=t.integrationSlug;return[["information","/organizations/".concat(e,"/config/integrations/?provider_key=").concat(n)],["configurations","/organizations/".concat(e,"/integrations/?provider_key=").concat(n,"&includeConfig=0")]]}},{key:"renderTopButton",value:function(t,e){var n=this.props.organization,r=this.provider,i=r.metadata,o={style:{marginBottom:Object(S.a)(1)},size:"small",priority:"primary","data-test-id":"install-button",disabled:t,organization:n};return e?r.canAdd?Object(U.f)(q,a()({provider:r,onAddIntegration:this.onInstall,analyticsParams:{view:"integrations_directory_integration_detail",already_installed:"Not Installed"!==this.installationStatus}},o)):i.aspects.externalInstall?Object(U.f)(z.b,a()({icon:Object(U.f)(D.ab,null),href:i.aspects.externalInstall.url,onClick:this.handleExternalInstall,external:!0},o),i.aspects.externalInstall.buttonText):Object(U.f)(I.a.Fragment,null):this.renderRequestIntegrationButton()}},{key:"renderConfigurations",value:function(){var t=this,e=this.state.configurations,n=this.props.organization,r=this.provider;if(e.length){var i=e.some(E.k);return Object(U.f)(R.a,{organization:n,features:["slack-migration"]},(function(o){var a=o.hasFeature;return Object(U.f)("div",null,a&&i&&Object(U.f)(x.b,{type:"warning",icon:Object(U.f)(D.Hb,{size:"sm"})},Object(E.f)(r)),e.map((function(e){return Object(U.f)(rt,{key:e.id},Object(U.f)(J,{organization:n,provider:r,integration:e,onRemove:t.onRemove,onDisable:t.onDisable,onReAuthIntegration:t.onInstall,"data-test-id":e.id,trackIntegrationEvent:t.trackIntegrationEvent,showReauthMessage:a&&Object(E.k)(e)}))})))}))}return this.renderEmptyConfigurations()}},{key:"integrationType",get:function(){return"first_party"}},{key:"provider",get:function(){return this.state.information.providers[0]}},{key:"description",get:function(){return this.metadata.description}},{key:"author",get:function(){return this.metadata.author}},{key:"alerts",get:function(){var t=this.provider,e=this.metadata,n=(e.aspects.alerts||[]).map((function(t){switch(t.icon){case"icon-warning":case"icon-warning-sm":return tt(tt({},t),{},{icon:Object(U.f)(D.Hb,null)});default:return tt(tt({},t),{},{icon:Object(U.f)(D.B,null)})}}));return!t.canAdd&&e.aspects.externalInstall&&n.push({type:"warning",icon:Object(U.f)(D.ab,null),text:e.aspects.externalInstall.noticeText}),n}},{key:"resourceLinks",get:function(){var t=this.metadata;return[{url:t.source_url,title:"View Source"},{url:t.issue_url,title:"Report Issue"}]}},{key:"metadata",get:function(){return this.provider.metadata}},{key:"isEnabled",get:function(){return this.state.configurations.length>0}},{key:"installationStatus",get:function(){return this.isEnabled?"Installed":"Not Installed"}},{key:"integrationName",get:function(){return this.provider.name}},{key:"featureData",get:function(){return this.metadata.features}}]),n}(C.a),rt=Object(j.a)("div",{target:"e1gcgeg90",label:"InstallWrapper"})("padding:",Object(S.a)(2),";border:1px solid ",(function(t){return t.theme.border}),";border-bottom:none;background-color:",(function(t){return t.theme.background}),";&:last-child{border-bottom:1px solid ",(function(t){return t.theme.border}),";}");e.default=Object(_.a)(nt)}}]);
//# sourceMappingURL=IntegrationDetailedView.js.map