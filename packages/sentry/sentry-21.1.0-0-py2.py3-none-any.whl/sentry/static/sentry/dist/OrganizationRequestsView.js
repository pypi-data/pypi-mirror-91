(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[127],{1885:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(9),a=n.n(r),i=n(10),o=n.n(i),s=n(11),c=n.n(s),u=n(13),l=n.n(u),p=n(5),d=n.n(p),f=(n(1),n(259)),b=n.n(f),m=n(423),v=n(0);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var h=function(e){c()(n,e);var t=O(n);function n(){return a()(this,n),t.apply(this,arguments)}return o()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(v.f)(b.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),n}(m.a);h.displayName="AsyncView"},1994:function(e,t,n){"use strict";var r=n(6),a=n.n(r),i=(n(1),n(38)),o=n.n(i),s=n(25),c=n.n(s),u=n(223),l=n(100),p=n(0);t.a=function(e){return o()({displayName:"withTeams(".concat(Object(l.a)(e),")"),mixins:[c.a.listenTo(u.a,"onTeamUpdate")],getInitialState:function(){return{teams:u.a.getAll()}},onTeamUpdate:function(){this.setState({teams:u.a.getAll()})},render:function(){return Object(p.f)(e,a()({},this.props,{teams:this.state.teams}))}})}},2177:function(e,t,n){"use strict";var r=n(6),a=n.n(r),i=n(15),o=n.n(i),s=n(3),c=(n(1),n(119)),u=n(7),l=n(0),p=function(e){var t=e.roles,n=e.disableUnallowed,r=o()(e,["roles","disableUnallowed"]);return Object(l.f)(d,a()({deprecatedSelectControl:!0,options:t&&t.map((function(e){return{value:e.id,label:e.name,disabled:n&&!e.allowed}})),optionRenderer:function(e){var n=t.find((function(t){return t.id===e.value})),r=n.name,a=n.desc;return Object(l.f)(f,null,Object(l.f)("h1",null,r),Object(l.f)("div",null,a))}},r))};p.displayName="RoleSelector";var d=Object(s.a)(c.a,{target:"enwdr730",label:"RoleSelectControl"})(".Select-menu-outer{margin-top:",Object(u.a)(1),";width:350px;border-radius:4px;overflow:hidden;box-shadow:0 0 6px rgba(0,0,0,0.15);}&.Select.is-focused.is-open > .Select-control{border-radius:4px;}.Select-option:not(:last-child){border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";}"),f=Object(s.a)("div",{target:"enwdr731",label:"RoleItem"})("display:grid;grid-template-columns:80px 1fr;grid-gap:",Object(u.a)(1),";h1,div{font-size:",(function(e){return e.theme.fontSizeSmall}),";line-height:1.4;margin:",Object(u.a)(.25)," 0;}");t.a=p},2863:function(e,t,n){"use strict";n.r(t);var r=n(22),a=n.n(r),i=n(8),o=n.n(i),s=n(30),c=n.n(s),u=n(9),l=n.n(u),p=n(10),d=n.n(p),f=n(126),b=n.n(f),m=n(11),v=n.n(m),O=n(13),h=n.n(O),y=n(5),g=n.n(y),j=n(1),R=n.n(j),q=n(34),w=n(118),S=n(33),x=n(4),A=n(37),P=n(58),D=n(1994),k=n(1885),I=n(426),z=n(3),N=n(26),B=n(139),T=n(119),C=n(296),E=n(2177),M=n(429),U=n(32),_=n(7),L=n(0),F=Object(C.a)({hookName:"member-invite-modal:customization",defaultComponent:function(e){var t=e.onSendInvites;return(0,e.children)({sendInvites:t,canSend:!0})}}),J=function(e){var t=e.inviteRequest,n=e.inviteRequestBusy,r=e.organization,a=e.onApprove,i=e.onDeny,o=e.onUpdate,s=e.allTeams,c=e.allRoles,u=c.find((function(e){return e.id===t.role})),l=!(u&&u.allowed);return Object(L.f)(F,{willInvite:!0,organization:r,onSendInvites:function(){return a(t)}},(function(e){var r=e.sendInvites,a=e.canSend,u=e.headerInfo;return Object(L.f)(W,null,Object(L.f)("div",null,Object(L.f)("h5",{style:{marginBottom:Object(_.a)(.5)}},Object(L.f)(V,null,t.email)),"requested_to_be_invited"===t.inviteStatus?t.inviterName&&Object(L.f)(G,null,Object(L.f)(U.a,{title:Object(x.b)("An existing member has asked to invite this user to your organization")},Object(x.c)("Requested by [inviterName]",{inviterName:t.inviterName}))):Object(L.f)(K,{tooltipText:Object(x.b)("This user has asked to join your organization.")},Object(x.b)("Join request"))),Object(L.f)(Y,{name:"role",disableUnallowed:!0,onChange:function(e){return o({role:e.value})},value:t.role,roles:c}),Object(L.f)(H,{deprecatedSelectControl:!0,name:"teams",placeholder:Object(x.b)("Add to teams..."),onChange:function(e){return o({teams:e.map((function(e){return e.value}))})},value:t.teams,options:s.map((function(e){var t=e.slug;return{value:t,label:"#".concat(t)}})),multiple:!0,clearable:!0}),Object(L.f)(Q,null,Object(L.f)(B.a,{onConfirm:r,disableConfirmButton:!a,disabled:l,message:Object(L.f)(R.a.Fragment,null,Object(x.c)("Are you sure you want to invite [email] to your organization?",{email:t.email}),u)},Object(L.f)(N.b,{priority:"primary",size:"small",busy:n[t.id],title:l?Object(x.b)("You do not have permission to approve a user of this role.\n                     Select a different role to approve this user."):void 0},Object(x.b)("Approve"))),Object(L.f)(N.b,{size:"small",busy:n[t.id],onClick:function(){return i(t)}},Object(x.b)("Deny"))))}))};J.displayName="InviteRequestRow";var K=Object(z.a)(M.a,{target:"e15jhn050",label:"JoinRequestIndicator"})({name:"1lejymi",styles:"text-transform:uppercase;"}),W=Object(z.a)(w.f,{target:"e15jhn051",label:"StyledPanelItem"})("display:grid;grid-template-columns:minmax(150px,auto) minmax(100px,140px) 220px max-content;grid-gap:",Object(_.a)(2),";align-items:center;"),V=Object(z.a)("div",{target:"e15jhn052",label:"UserName"})("font-size:",(function(e){return e.theme.fontSizeLarge}),";overflow:hidden;text-overflow:ellipsis;"),G=Object(z.a)("div",{target:"e15jhn053",label:"Description"})("display:block;color:",(function(e){return e.theme.subText}),";font-size:14px;overflow:hidden;text-overflow:ellipsis;"),Y=Object(z.a)(E.a,{target:"e15jhn054",label:"StyledRoleSelectControl"})({name:"1gn5ro3",styles:"max-width:140px;"}),H=Object(z.a)(T.a,{target:"e15jhn055",label:"TeamSelectControl"})({name:"1qnipy5",styles:"max-width:220px;.Select-value-label{max-width:150px;word-break:break-all;}"}),Q=Object(z.a)("div",{target:"e15jhn056",label:"ButtonGroup"})("display:inline-grid;grid-template-columns:repeat(2,max-content);grid-gap:",Object(_.a)(1),";"),X=J,Z=n(50);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var ne=function(e){v()(n,e);var t=te(n);function n(){var e;l()(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={accessRequestBusy:{}},e.handleAction=function(){var t=c()(a.a.mark((function t(n){var r,i,s,c,u,l,p,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,i=n.isApproved,s=n.successMessage,c=n.errorMessage,u=e.props,l=u.api,p=u.orgId,d=u.onRemoveAccessRequest,e.setState((function(e){return{accessRequestBusy:ee(ee({},e.accessRequestBusy),{},o()({},r,!0))}})),t.prev=3,t.next=6,l.requestPromise("/organizations/".concat(p,"/access-requests/").concat(r,"/"),{method:"PUT",data:{isApproved:i}});case 6:d(r),Object(q.d)(s),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),Object(q.a)(c);case 13:e.setState((function(e){return{accessRequestBusy:ee(ee({},e.accessRequestBusy),{},o()({},r,!1))}}));case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleApprove=function(t,n){n.stopPropagation(),e.handleAction({id:t,isApproved:!0,successMessage:Object(x.b)("Team request approved"),errorMessage:Object(x.b)("Error approving team request")})},e.handleDeny=function(t,n){n.stopPropagation(),e.handleAction({id:t,isApproved:!1,successMessage:Object(x.b)("Team request denied"),errorMessage:Object(x.b)("Error denying team request")})},e}return d()(n,[{key:"render",value:function(){var e=this,t=this.props.requestList,n=this.state.accessRequestBusy;return t&&t.length?Object(L.f)(w.a,null,Object(L.f)(w.e,null,Object(x.b)("Pending Team Requests")),Object(L.f)(w.c,null,t.map((function(t){var r=t.id,a=t.member,i=t.team,o=t.requester,s=a.user&&(a.user.name||a.user.email||a.user.username),c=o&&(o.name||o.email||o.username);return Object(L.f)(re,{key:r},Object(L.f)("div",{"data-test-id":"request-message"},c?Object(x.c)("[requesterName] requests to add [name] to the [team] team.",{requesterName:c,name:Object(L.f)("strong",null,s),team:Object(L.f)("strong",null,"#",i.slug)}):Object(x.c)("[name] requests access to the [team] team.",{name:Object(L.f)("strong",null,s),team:Object(L.f)("strong",null,"#",i.slug)})),Object(L.f)("div",null,Object(L.f)(ae,{priority:"primary",size:"small",onClick:function(t){return e.handleApprove(r,t)},busy:n[r]},Object(x.b)("Approve")),Object(L.f)(N.b,{busy:n[r],onClick:function(t){return e.handleDeny(r,t)},size:"small"},Object(x.b)("Deny"))))})))):null}}]),n}(R.a.Component);ne.displayName="OrganizationAccessRequests",ne.defaultProps={requestList:[]};var re=Object(z.a)(w.f,{target:"e6r9sdi0",label:"StyledPanelItem"})("display:grid;grid-template-columns:auto max-content;grid-gap:",Object(_.a)(2),";align-items:center;"),ae=Object(z.a)(N.b,{target:"e6r9sdi1",label:"StyledButton"})("margin-right:",Object(_.a)(1),";"),ie=Object(Z.a)(ne);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var ue=function(e){v()(n,e);var t=ce(n);function n(){var e;l()(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).handleAction=function(){var t=c()(a.a.mark((function t(n){var r,i,s,c,u,l,p,d,f,b,m;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.inviteRequest,i=n.method,s=n.data,c=n.successMessage,u=n.errorMessage,l=n.eventKey,p=n.eventName,d=e.props,f=d.params,b=d.organization,m=d.onRemoveInviteRequest,e.setState((function(e){return{inviteRequestBusy:se(se({},e.inviteRequestBusy),{},o()({},r.id,!0))}})),t.prev=3,t.next=6,e.api.requestPromise("/organizations/".concat(f.orgId,"/invite-requests/").concat(r.id,"/"),{method:i,data:s});case 6:m(r.id),Object(q.d)(c),Object(A.d)({eventKey:l,eventName:p,organization_id:b.id,member_id:parseInt(r.id,10),invite_status:r.inviteStatus}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),Object(q.a)(u);case 14:e.setState((function(e){return{inviteRequestBusy:se(se({},e.inviteRequestBusy),{},o()({},r.id,!1))}}));case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),e.handleApprove=function(t){e.handleAction({inviteRequest:t,method:"PUT",data:{role:t.role,teams:t.teams,approve:1},successMessage:Object(x.c)("[email] has been invited",{email:t.email}),errorMessage:Object(x.c)("Error inviting [email]",{email:t.email}),eventKey:"invite_request.approved",eventName:"Invite Request Approved"})},e.handleDeny=function(t){e.handleAction({inviteRequest:t,method:"DELETE",data:{},successMessage:Object(x.c)("Invite request for [email] denied",{email:t.email}),errorMessage:Object(x.c)("Error denying invite request for [email]",{email:t.email}),eventKey:"invite_request.denied",eventName:"Invite Request Denied"})},e}return d()(n,[{key:"getDefaultState",value:function(){return se(se({},b()(g()(n.prototype),"getDefaultState",this).call(this)),{},{inviteRequestBusy:{}})}},{key:"UNSAFE_componentWillMount",value:function(){b()(g()(n.prototype),"UNSAFE_componentWillMount",this).call(this),this.handleRedirect()}},{key:"componentDidUpdate",value:function(){this.handleRedirect()}},{key:"getEndpoints",value:function(){var e=this.props.organization.slug;return[["member","/organizations/".concat(e,"/members/me/")]]}},{key:"handleRedirect",value:function(){var e=this.props,t=e.router,n=e.params,r=e.requestList;return e.showInviteRequests||r.length?null:t.push("/settings/".concat(n.orgId,"/members/"))}},{key:"render",value:function(){var e=this,t=this.props,n=t.params,r=t.requestList,a=t.showInviteRequests,i=t.inviteRequests,o=t.onRemoveAccessRequest,s=t.onUpdateInviteRequest,c=t.organization,u=t.teams,l=this.state,p=l.inviteRequestBusy,d=l.member;return Object(L.f)(R.a.Fragment,null,a&&Object(L.f)(w.a,null,Object(L.f)(w.e,null,Object(x.b)("Pending Invite Requests")),Object(L.f)(w.c,null,i.map((function(t){return Object(L.f)(X,{key:t.id,organization:c,inviteRequest:t,inviteRequestBusy:p,allTeams:u,allRoles:d?d.roles:S.y,onApprove:e.handleApprove,onDeny:e.handleDeny,onUpdate:function(e){return s(t.id,e)}})})),0===i.length&&Object(L.f)(I.a,null,Object(x.b)("No requests found.")))),Object(L.f)(ie,{orgId:n.orgId,requestList:r,onRemoveAccessRequest:o}))}}]),n}(k.a);ue.displayName="OrganizationRequestsView",ue.defaultProps={inviteRequests:[]};t.default=Object(D.a)(Object(P.a)(ue))}}]);
//# sourceMappingURL=OrganizationRequestsView.js.map