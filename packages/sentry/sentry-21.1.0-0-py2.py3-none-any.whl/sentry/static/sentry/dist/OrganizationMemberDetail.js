(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[120],{1885:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(9),a=n.n(r),i=n(10),c=n.n(i),o=n(11),l=n.n(o),s=n(13),u=n.n(s),f=n(5),b=n.n(f),d=(n(1),n(259)),m=n.n(d),p=n(423),O=n(0);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var v=function(e){l()(n,e);var t=j(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(O.f)(m.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),n}(p.a);v.displayName="AsyncView"},1886:function(e,t,n){"use strict";var r=n(15),a=n.n(r),i=n(9),c=n.n(i),o=n(10),l=n.n(o),s=n(11),u=n.n(s),f=n(13),b=n.n(f),d=n(5),m=n.n(d),p=n(3),O=n(1),j=n.n(O),v=n(217),h=n(7),g=n(0);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var w=function(e){u()(n,e);var t=y(n);function n(){return c()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.subtitle,i=e.action,c=e.tabs,o=e.noTitleStyles,l=e.body,s=a()(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),u=!r;return Object(g.f)("div",s,Object(g.f)(R,{isNarrow:u},Object(g.f)(x,null,t&&Object(g.f)(k,null,t),n&&Object(g.f)(S,{tabs:c,styled:o},Object(g.f)(v.a,null,n),r&&Object(g.f)(T,null,r))),i&&Object(g.f)(A,{isNarrow:u},i)),l&&Object(g.f)(D,null,l),c&&Object(g.f)(I,null,c))}}]),n}(j.a.Component);w.displayName="UnstyledSettingsPageHeader",w.defaultProps={noTitleStyles:!1};var R=Object(p.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),x=Object(p.a)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),S=Object(p.a)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",Object(h.a)(4)," ",Object(h.a)(2)," ",Object(h.a)(3)," 0;"),T=Object(p.a)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",Object(h.a)(1.5)," 0 0;"),k=Object(p.a)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",Object(h.a)(1),";"),A=Object(p.a)("div",{target:"e1uay4fd5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":Object(h.a)(4)}),";"),z=Object(p.a)(w,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",Object(h.a)(4),";"),D=Object(p.a)("div",{target:"e1uay4fd7",label:"BodyWrapper"})("flex:1;margin:0 0 ",Object(h.a)(3),";"),I=Object(p.a)("div",{target:"e1uay4fd8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});t.a=z},1892:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(703),a=n.n(r),i=n(563);function c(e,t){var n,r,c,o,l=t.routes,s=t.params,u=t.location,f=t.stepBack,b=l.map((function(e){return e.path||""}));"string"!=typeof e?(o=l.indexOf(e)+1,c=a()(b.slice(0,o),(function(e){return"/"===e[0]}))):c=a()(b,(function(e){return"/"===e[0]}));var d=b.slice(c,o);void 0!==f&&(d=d.slice(0,f));var m=null!==(n=null==u?void 0:u.search)&&void 0!==n?n:"",p=null!==(r=null==u?void 0:u.hash)&&void 0!==r?r:"",O="".concat(d.join("")).concat("string"!=typeof e?"":e).concat(m).concat(p);return Object(i.a)(O,s)}},2162:function(e,t,n){"use strict";var r=n(22),a=n.n(r),i=n(30),c=n.n(i),o=n(9),l=n.n(o),s=n(10),u=n.n(s),f=n(11),b=n.n(f),d=n(13),m=n.n(d),p=n(5),O=n.n(p),j=n(3),v=n(1),h=n.n(v),g=n(152),y=n.n(g),w=n(26),R=n(139),x=n(206),S=n(260),T=n(67),k=n(118),A=n(33),z=n(16),D=n(4),I=n(7),P=n(50),C=n(426),N=n(0);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var M=function(e){b()(n,e);var t=B(n);function n(){var e;l()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={loading:!0,teams:null},e.fetchTeams=y()(function(){var t=c()(a.a.mark((function t(n){var r,i,c,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,i=r.api,c=r.organization,t.next=3,i.requestPromise("/organizations/".concat(c.slug,"/teams/"),{query:{query:n,per_page:A.G}});case 3:o=t.sent,e.setState({teams:o,loading:!1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A.h),e.handleQueryUpdate=function(t){e.setState({loading:!0}),e.fetchTeams(t.target.value)},e.handleAddTeam=function(t){var n,r=null===(n=e.state.teams)||void 0===n?void 0:n.find((function(e){return e.slug===t.value}));r&&e.props.onAddTeam(r)},e.handleRemove=function(t){e.props.onRemoveTeam(t)},e}return u()(n,[{key:"componentDidMount",value:function(){this.fetchTeams()}},{key:"renderTeamAddDropDown",value:function(){var e=this.props,t=e.disabled,n=e.selectedTeams,r=e.menuHeader,a=this.state.teams,i=t,c=[];return c=null===a||0===a.length?[]:a.filter((function(e){return!n.includes(e.slug)})).map((function(e,t){return{index:t,value:e.slug,searchKey:e.slug,label:Object(N.f)(L,null,"#",e.slug)}})),Object(N.f)(x.a,{items:c,busyItemsStillVisible:this.state.loading,onChange:this.handleQueryUpdate,onSelect:this.handleAddTeam,emptyMessage:Object(D.b)("No teams"),menuHeader:r,disabled:i,alignMenu:"right"},(function(e){var t=e.isOpen;return Object(N.f)(S.a,{"aria-label":Object(D.b)("Add Team"),isOpen:t,size:"xsmall",disabled:i},Object(D.b)("Add Team"))}))}},{key:"renderBody",value:function(){var e=this,t=this.props,n=t.organization,r=t.selectedTeams,a=t.disabled,i=t.confirmLastTeamRemoveMessage;if(0===r.length)return Object(N.f)(C.a,null,Object(D.b)("No Teams assigned"));var c=1===r.length&&i?i:null;return r.map((function(t){return Object(N.f)(q,{key:t,orgId:n.slug,team:t,onRemove:e.handleRemove,disabled:a,confirmMessage:c})}))}},{key:"render",value:function(){return Object(N.f)(k.a,null,Object(N.f)(k.e,{hasButtons:!0},Object(D.b)("Team"),this.renderTeamAddDropDown()),Object(N.f)(k.c,null,this.renderBody()))}}]),n}(h.a.Component);M.displayName="TeamSelect";var q=function(e){var t=e.orgId,n=e.team,r=e.onRemove,a=e.disabled,i=e.confirmMessage;return Object(N.f)(E,null,Object(N.f)(H,{to:"/settings/".concat(t,"/teams/").concat(n,"/")},"#".concat(n)),Object(N.f)(R.a,{message:i,bypass:!i,onConfirm:function(){return r(n)},disabled:a},Object(N.f)(w.b,{size:"xsmall",icon:Object(N.f)(z.vb,{isCircled:!0,size:"xs"}),disabled:a},Object(D.b)("Remove"))))};q.displayName="TeamRow";var L=Object(j.a)("div",{target:"e1rhi4ev0",label:"TeamDropdownElement"})("padding:",Object(I.a)(.5)," 0px;text-transform:none;"),E=Object(j.a)(k.f,{target:"e1rhi4ev1",label:"TeamPanelItem"})("padding:",Object(I.a)(2),";align-items:center;"),H=Object(j.a)(T.a,{target:"e1rhi4ev2",label:"StyledLink"})("flex:1;margin-right:",Object(I.a)(1),";");t.a=Object(P.a)(M)},2885:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n.n(r),i=n(22),c=n.n(i),o=n(30),l=n.n(o),s=n(9),u=n.n(s),f=n(10),b=n.n(f),d=n(126),m=n.n(d),p=n(11),O=n.n(p),j=n(13),v=n.n(j),h=n(5),g=n.n(h),y=n(3),w=n(1),R=n.n(w),x=n(12),S=n(48),T=n(451),k=n(34),A=n(372),z=n(448),D=n(26),I=n(139),P=n(700),C=n(721),N=n(53),B=n(118),M=n(32),q=n(4),L=n(319),E=n(7),H=n(1892),W=n(58),F=n(1885),J=n(701),U=n(1886),G=n(2162),Q=n(737),V=n(699),_=n(0);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v()(this,n)}}var Y=Object(y.a)("label",{target:"e1noblkb0",label:"Label"})({name:"muoiou",styles:"display:flex;flex:1;align-items:center;margin-bottom:0;"}),X=function(e){O()(n,e);var t=K(n);function n(){return u()(this,n),t.apply(this,arguments)}return b()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,r=t.enforceAllowed,a=t.roleList,i=t.selectedRole;return Object(_.f)(B.a,null,Object(_.f)(B.e,null,Object(q.b)("Role")),Object(_.f)(B.c,null,a.map((function(t){var a=t.desc,c=t.name,o=t.id,l=t.allowed,s=n||r&&!l;return Object(_.f)(B.f,{key:o,onClick:function(){return!s&&e.props.setRole(o)},css:s?{color:"grey",cursor:"default"}:{}},Object(_.f)(Y,null,Object(_.f)(Q.a,{id:o,value:c,checked:o===i,readOnly:!0}),Object(_.f)("div",{style:{flex:1,padding:"0 16px"}},c,Object(_.f)(V.a,{noMargin:!0},Object(_.f)("div",{className:"help-block"},a)))))}))))}}]),n}(R.a.Component);X.displayName="RoleSelect";var Z=X;function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v()(this,n)}}var ne=Object(q.b)("Cannot be reset since user is in more than one organization"),re=Object(q.b)("Not enrolled in two-factor authentication"),ae=Object(q.b)("You do not have permission to perform this action"),ie=Object(q.b)("Cannot be reset since two-factor is required for this organization"),ce=function(e){O()(n,e);var t=te(n);function n(){var e;u()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleSave=l()(c.a.mark((function t(){var n,r,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.organization,a=n.params,Object(k.b)(Object(q.b)("Saving...")),e.setState({busy:!0}),t.prev=3,t.next=6,Object(A.d)(e.api,{orgId:r.slug,memberId:a.memberId,data:e.state.member});case 6:Object(k.d)(Object(q.b)("Saved")),e.redirectToMemberPage(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),i=t.t0&&t.t0.responseJSON&&t.t0.responseJSON.detail||Object(q.b)("Could not save..."),Object(k.a)(i);case 14:e.setState({busy:!1});case 15:case"end":return t.stop()}}),t,null,[[3,10]])}))),e.handleInvite=function(){var t=l()(c.a.mark((function t(n){var r,a,i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.organization,i=r.params,Object(k.b)(Object(q.b)("Sending invite...")),e.setState({busy:!0}),t.prev=3,t.next=6,Object(A.c)(e.api,{orgId:a.slug,memberId:i.memberId,regenerate:n});case 6:o=t.sent,Object(k.d)(Object(q.b)("Sent invite!")),n&&e.setState((function(e){return{member:ee(ee({},e.member),o)}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),Object(k.a)(Object(q.b)("Could not send invite"));case 14:e.setState({busy:!1});case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),e.handleAddTeam=function(t){var n=e.state.member;n.teams.includes(t.slug)||n.teams.push(t.slug),e.setState({member:n})},e.handleRemoveTeam=function(t){var n=e.state.member;e.setState({member:ee(ee({},n),{},{teams:n.teams.filter((function(e){return e!==t}))})})},e.handle2faReset=l()(c.a.mark((function t(){var n,r,a,i,o,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.organization,a=n.router,i=e.state.member,o=i.user,l=o.authenticators.map((function(t){return Object(T.c)(e.api,o.id,t.id)})),t.prev=3,t.next=6,Promise.all(l);case 6:a.push("/settings/".concat(r.slug,"/members/")),Object(k.d)(Object(q.b)("All authenticators have been removed")),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),Object(k.a)(Object(q.b)("Error removing authenticators")),S.c(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,10]])}))),e.showResetButton=function(){var t=e.props.organization,n=e.state.member.user;return!(!n||!n.authenticators||t.require2FA)&&(n.authenticators.length>=1&&n.canReset2fa)},e.getTooltip=function(){var t=e.props.organization,n=e.state.member.user;return n?n.authenticators?n.authenticators.length?n.canReset2fa?t.require2FA?ie:"":ne:re:ae:""},e}return b()(n,[{key:"getDefaultState",value:function(){return ee(ee({},m()(g()(n.prototype),"getDefaultState",this).call(this)),{},{roleList:[],selectedRole:"",member:null})}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,n=e.params;return[["member","/organizations/".concat(t.slug,"/members/").concat(n.memberId,"/")]]}},{key:"redirectToMemberPage",value:function(){var e=this.props,t=e.location,n=e.params,r=e.routes,a=Object(H.a)("members/",{location:t,routes:r,params:n,stepBack:-2});x.browserHistory.push(a)}},{key:"renderBody",value:function(){var e=this,t=this.props.organization,n=this.state.member;if(!n)return Object(_.f)(C.a,null);var r=t.access,a=n.invite_link,i=r.includes("org:write"),c=n.email,o=!n.expired,l=!n.pending;return Object(_.f)(R.a.Fragment,null,Object(_.f)(U.a,{title:Object(_.f)(R.a.Fragment,null,Object(_.f)("div",null,n.name),Object(_.f)(oe,null,Object(q.b)("Member Settings")))}),Object(_.f)(B.a,null,Object(_.f)(B.e,null,Object(q.b)("Basics")),Object(_.f)(B.c,null,Object(_.f)(B.f,null,Object(_.f)(ue,null,Object(_.f)(le,null,Object(_.f)("div",null,Object(_.f)(se,null,Object(q.b)("Email")),Object(_.f)("div",null,Object(_.f)(N.a,{href:"mailto:".concat(c)},c))),Object(_.f)("div",null,Object(_.f)(se,null,Object(q.b)("Status")),Object(_.f)("div",{"data-test-id":"member-status"},n.expired?Object(_.f)("em",null,Object(q.b)("Invitation Expired")):n.pending?Object(_.f)("em",null,Object(q.b)("Invitation Pending")):Object(q.b)("Active"))),Object(_.f)("div",null,Object(_.f)(se,null,Object(q.b)("Added")),Object(_.f)("div",null,Object(_.f)(P.a,{dateOnly:!0,date:n.dateCreated})))),a&&Object(_.f)(fe,null,Object(_.f)("div",null,Object(_.f)(se,null,Object(q.b)("Invite Link")),Object(_.f)(z.a,null,Object(_.f)(be,null,a)),Object(_.f)("p",{className:"help-block"},Object(q.b)("This unique invite link may only be used by this member."))),Object(_.f)(de,null,Object(_.f)(D.b,{onClick:function(){return e.handleInvite(!0)}},Object(q.b)("Generate New Invite")),o&&Object(_.f)(D.b,{"data-test-id":"resend-invite",onClick:function(){return e.handleInvite(!1)}},Object(q.b)("Resend Invite")))))))),l&&Object(_.f)(B.a,null,Object(_.f)(B.e,null,Object(q.b)("Authentication")),Object(_.f)(B.c,null,Object(_.f)(J.a,{alignRight:!0,flexibleControlStateSize:!0,label:Object(q.b)("Reset two-factor authentication"),help:Object(q.b)("Resetting two-factor authentication will remove all two-factor authentication methods for this member.")},Object(_.f)(M.a,{"data-test-id":"reset-2fa-tooltip",disabled:this.showResetButton(),title:this.getTooltip()},Object(_.f)(I.a,{disabled:!this.showResetButton(),message:Object(q.c)("Are you sure you want to disable all two-factor authentication methods for [name]?",{name:n.name?n.name:"this member"}),onConfirm:this.handle2faReset,"data-test-id":"reset-2fa-confirm"},Object(_.f)(D.b,{"data-test-id":"reset-2fa",priority:"danger"},Object(q.b)("Reset two-factor authentication"))))))),Object(_.f)(Z,{enforceAllowed:!1,disabled:!i,roleList:n.roles,selectedRole:n.role,setRole:function(t){return e.setState({member:ee(ee({},n),{},{role:t})})}}),Object(_.f)(G.a,{organization:t,selectedTeams:n.teams,disabled:!i,onAddTeam:this.handleAddTeam,onRemoveTeam:this.handleRemoveTeam}),Object(_.f)(me,null,Object(_.f)(D.b,{priority:"primary",busy:this.state.busy,onClick:this.handleSave,disabled:!i},Object(q.b)("Save Member"))))}}]),n}(F.a),oe=(t.default=Object(W.a)(ce),Object(y.a)("div",{target:"e4la2im0",label:"ExtraHeaderText"})("color:",(function(e){return e.theme.gray300}),";font-weight:normal;font-size:",(function(e){return e.theme.fontSizeLarge}),";")),le=Object(y.a)("div",{target:"e4la2im1",label:"Details"})("display:grid;grid-auto-flow:column;grid-template-columns:2fr 1fr 1fr;grid-gap:",Object(E.a)(2),";width:100%;@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){grid-auto-flow:row;grid-template-columns:auto;}"),se=Object(y.a)("div",{target:"e4la2im2",label:"DetailLabel"})("font-weight:bold;margin-bottom:",Object(E.a)(.5),";color:",(function(e){return e.theme.textColor}),";"),ue=Object(y.a)("div",{target:"e4la2im3",label:"OverflowWrapper"})({name:"c4alqz",styles:"overflow:hidden;flex:1;"}),fe=Object(y.a)("div",{target:"e4la2im4",label:"InviteSection"})("border-top:1px solid ",(function(e){return e.theme.border}),";margin-top:",Object(E.a)(2),";padding-top:",Object(E.a)(2),";"),be=Object(y.a)("code",{target:"e4la2im5",label:"CodeInput"})((function(e){return Object(L.a)(e)}),";"),de=Object(y.a)("div",{target:"e4la2im6",label:"InviteActions"})("display:grid;grid-gap:",Object(E.a)(1),";grid-auto-flow:column;justify-content:flex-end;margin-top:",Object(E.a)(2),";"),me=Object(y.a)("div",{target:"e4la2im7",label:"Footer"})({name:"1bvc4cc",styles:"display:flex;justify-content:flex-end;"})}}]);
//# sourceMappingURL=OrganizationMemberDetail.js.map