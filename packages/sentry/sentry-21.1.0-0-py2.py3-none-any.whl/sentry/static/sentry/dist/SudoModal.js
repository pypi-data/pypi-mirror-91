(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[195],{1874:function(t,e,r){"use strict";r.r(e),r.d(e,"SudoModal",(function(){return z}));var n=r(22),a=r.n(n),o=r(30),c=r.n(o),s=r(9),u=r.n(s),i=r(10),l=r.n(i),f=r(11),p=r.n(f),h=r(13),d=r.n(h),b=r(5),y=r.n(b),m=r(3),v=r(1),O=r.n(v),j=r(12),g=r(70),w=r(26),S=r(6),R=r.n(S),k=r(15),x=r.n(k),C=r(50),P=r(1110),q=r(0);function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y()(t);if(e){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d()(this,r)}}var D=function(t){p()(n,t);var e,r=A(n);function n(){var t;u()(this,n);for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(t=r.call.apply(r,[this].concat(a))).state={authenticators:[]},t}return l()(n,[{key:"componentDidMount",value:function(){this.getAuthenticators()}},{key:"getAuthenticators",value:(e=c()(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.api,t.prev=1,t.next=4,e.requestPromise("/authenticators/");case 4:r=t.sent,this.setState({authenticators:null!=r?r:[]}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this,e=this.props.className,r=this.state.authenticators;return r.length?Object(q.f)("div",{className:e},r.map((function(e){var r=e.id,n=x()(e,["id"]);return"u2f"===r&&n.challenge?Object(q.f)(P.default,R()({key:r},t.props,{challengeData:n.challenge})):null}))):null}}]),n}(O.a.Component);D.displayName="U2fContainer";var M=Object(C.a)(D),U=r(16),B=r(4),E=r(36),F=r(7),T=r(315),N=r(64),H=r(699);function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y()(t);if(e){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d()(this,r)}}var z=function(t){p()(r,t);var e=I(r);function r(){var t;u()(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={error:!1,busy:!1},t.handleSuccess=function(){var e=t.props,r=e.closeModal,n=e.superuser,a=e.location,o=e.router,c=e.retryRequest;c?n?o.replace({pathname:a.pathname,state:{forceUpdate:new Date}}):t.setState({busy:!0},(function(){c().then((function(){t.setState({busy:!1},r)}))})):r()},t.handleError=function(){t.setState({busy:!1,error:!0})},t.handleU2fTap=function(){var e=c()(a.a.mark((function e(r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({busy:!0}),n=t.props.api,e.prev=2,e.next=5,n.requestPromise("/auth/",{method:"PUT",data:r});case 5:t.handleSuccess(),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),t.setState({busy:!1}),e.t0;case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),t}return l()(r,[{key:"renderBodyContent",value:function(){var t=this.props.superuser,e=this.state.error,r=E.default.get("user");return r.hasPasswordAuth?Object(q.f)(O.a.Fragment,null,Object(q.f)(J,null,t?Object(B.b)("You are attempting to access a resource that requires superuser access, please re-authenticate as a superuser."):Object(B.b)("Help us keep your account safe by confirming your identity.")),e&&Object(q.f)(Y,{type:"error",icon:Object(q.f)(U.B,{size:"md"})},Object(B.b)("Incorrect password")),Object(q.f)(T.a,{apiMethod:"PUT",apiEndpoint:"/auth/",submitLabel:Object(B.b)("Confirm Password"),onSubmitSuccess:this.handleSuccess,onSubmitError:this.handleError,hideFooter:!r.hasPasswordAuth,hideErrors:!0,resetOnError:!0},Object(q.f)(W,{type:"password",inline:!1,label:Object(B.b)("Password"),name:"password",autoFocus:!0,flexibleControlStateSize:!0}),Object(q.f)(M,{displayMode:"sudo",onTap:this.handleU2fTap}))):Object(q.f)(O.a.Fragment,null,Object(q.f)(H.a,null,Object(B.b)("You will need to reauthenticate to continue.")),Object(q.f)(w.b,{priority:"primary",href:"/auth/login/?next=".concat(encodeURIComponent(location.pathname))},Object(B.b)("Continue")))}},{key:"render",value:function(){var t=this.props,e=t.closeModal,r=t.Header,n=t.Body;return Object(q.f)(O.a.Fragment,null,Object(q.f)(r,{closeButton:!0,onHide:e},Object(B.b)("Confirm Password to Continue")),Object(q.f)(n,null,this.renderBodyContent()))}}]),r}(O.a.Component);z.displayName="SudoModal";e.default=Object(j.withRouter)(Object(C.a)(z));var J=Object(m.a)(H.a,{target:"eag9q640",label:"StyledTextBlock"})("margin-bottom:",Object(F.a)(1),";"),W=Object(m.a)(N.a,{target:"eag9q641",label:"StyledInputField"})({name:"131yq1t",styles:"padding-left:0;"}),Y=Object(m.a)(g.b,{target:"eag9q642",label:"StyledAlert"})({name:"gx0lhm",styles:"margin-bottom:0;"})}}]);
//# sourceMappingURL=SudoModal.js.map