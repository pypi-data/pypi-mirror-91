(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[187],{2007:function(t,e,n){var r=n(568),a=n(1092),i=Object.prototype.hasOwnProperty,s=a((function(t,e,n){i.call(t,n)?t[n].push(e):r(t,n,[e])}));t.exports=s},2091:function(t,e,n){"use strict";n.d(e,"a",(function(){return k})),n.d(e,"b",(function(){return w}));var r=n(29),a=n.n(r),i=n(24),s=n.n(i),o=n(8),c=n.n(o),u=n(2007),l=n.n(u),p=n(2092),f=n.n(p),b=n(289),d=n.n(b);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O={read:0,write:1,admin:2},j={project:"Project",team:"Team",release:"Release",event:"Event",org:"Organization",member:"Member"},h={Project:"no-access",Team:"no-access",Release:"no-access",Event:"no-access",Organization:"no-access",Member:"no-access"},m=function(t){var e=t.split(":")[1];return O[e]},v=function(t,e){return m(t)-m(e)};function w(t){var e,n=y({},h),r=s()(t);return t.includes("project:releases")&&(n.Release="admin",r=t.filter((function(t){return"project:releases"!==t}))),(e=r,Object.values(l()(e,(function(t){return t.split(":")[0]}))).map((function(t){return t.sort(v)})).map((function(t){return t.pop()}))).forEach((function(t){if(t){var e=t.split(":"),r=a()(e,2),i=r[0],s=r[1];n[j[i]]=s}})),n}function k(t){var e=w(t),n=d()(f()(e),["read","write","admin"]);return y(y({},{read:[],write:[],admin:[]}),n)}},2092:function(t,e,n){var r=n(261),a=n(2093),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,c=a((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=o.call(e)),s.call(t,e)?t[e].push(n):t[e]=[n]}),r);t.exports=c},2093:function(t,e,n){var r=n(2094);t.exports=function(t,e){return function(n,a){return r(n,t,e(a),{})}}},2094:function(t,e,n){var r=n(577);t.exports=function(t,e,n,a){return r(t,(function(t,r,i){e(a,n(t),r,i)})),a}},2183:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s}));var r=n(34),a=n(4);function i(t,e,n){Object(r.b)();var i=t.requestPromise("/organizations/".concat(e,"/sentry-app-installations/"),{method:"POST",data:{slug:n.slug}});return i.then((function(){return Object(r.e)()}),(function(){return Object(r.a)(Object(a.b)("Unable to install ".concat(n.name)))})),i}function s(t,e){Object(r.b)();var n=t.requestPromise("/sentry-app-installations/".concat(e.uuid,"/"),{method:"DELETE"});return n.then((function(){Object(r.d)(Object(a.b)("".concat(e.app.slug," successfully uninstalled.")))}),(function(){return Object(r.e)()})),n}},2890:function(t,e,n){"use strict";n.r(e);var r=n(6),a=n.n(r),i=n(22),s=n.n(i),o=n(24),c=n.n(o),u=n(30),l=n.n(u),p=n(9),f=n.n(p),b=n(10),d=n.n(b),g=n(126),y=n.n(g),O=n(11),j=n.n(O),h=n(13),m=n.n(h),v=n(5),w=n.n(v),k=n(3),I=n(1),x=n.n(I),A=n(34),C=n(62),P=n(2183),S=n(26),R=n(719),E=n(139),U=n(16),z=n(4),D=n(7),_=n(2091),T=n(165),L=n(80),M=n(761),N=n(58),B=n(2153),q=n(704),K=n(0);function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w()(t);if(e){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var H=function(t){j()(n,t);var e=W(n);function n(){var t;f()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).onCopy=l()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t.props.installationId);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),t.handleContinue=function(){t.onCopy(),Object(A.d)("Copied to clipboard"),setTimeout((function(){window.open("https://app.split.io/org/admin/integrations")}),2e3)},t}return d()(n,[{key:"render",value:function(){var t=this.props,e=t.installationId,n=t.closeModal;return Object(K.f)("div",null,Object(K.f)(J,null,"Copy this Installation ID and click to continue. You will use it to finish setup on Split.io."),Object(K.f)(J,null,Object(K.f)(q.a,{onCopy:this.onCopy},e)),Object(K.f)(Y,null,Object(K.f)(S.b,{size:"small",onClick:n},"Close"),Object(K.f)(S.b,{size:"small",priority:"primary",onClick:this.handleContinue},"Copy and Open Link")))}}]),n}(x.a.Component);H.displayName="SplitInstallationIdModal";var J=Object(k.a)("div",{target:"e14h1mmf0",label:"ItemHolder"})({name:"eaeacs",styles:"margin:10px;"}),Y=Object(k.a)(J,{target:"e14h1mmf1",label:"ButtonHolder"})({name:"99h030",styles:"text-align:right;& button{margin:5px;}"});function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w()(t);if(e){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var G=function(t){j()(n,t);var e=F(n);function n(){var t;f()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).tabs=["overview"],t.redirectUser=function(e){var n=t.props.organization,r=t.state.sentryApp,a={installationId:e.uuid,code:e.code,orgSlug:n.slug};if(r.redirectUrl){var i=Object(L.a)(r.redirectUrl,a);window.location.assign(i)}},t.handleInstall=l()(s.a.mark((function e(){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.organization,r=t.state.sentryApp,t.trackIntegrationEvent({eventKey:"integrations.installation_start",eventName:"Integrations: Installation Start",integration_status:r.status}),e.next=5,Object(P.a)(t.api,n.slug,r);case 5:"installed"===(a=e.sent).status&&t.trackIntegrationEvent({eventKey:"integrations.installation_complete",eventName:"Integrations: Installation Complete",integration_status:r.status}),r.redirectUrl?t.redirectUser(a):(Object(A.d)(Object(z.b)("".concat(r.slug," successfully installed."))),t.setState({appInstalls:[a].concat(c()(t.state.appInstalls))}),["split","split-dev","split-testing"].includes(r.slug)&&Object(C.j)((function(t){var e=t.closeModal;return Object(K.f)(H,{installationId:a.uuid,closeModal:e})})));case 8:case"end":return e.stop()}}),e)}))),t.handleUninstall=function(){var e=l()(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(P.b)(t.api,n);case 3:return t.trackIntegrationEvent({eventKey:"integrations.uninstall_completed",eventName:"Integrations: Uninstall Completed",integration_status:t.sentryApp.status}),r=t.state.appInstalls.filter((function(e){return e.app.slug!==t.sentryApp.slug})),e.abrupt("return",t.setState({appInstalls:r}));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",Object(A.a)(Object(z.b)("Unable to uninstall ".concat(t.sentryApp.name))));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.recordUninstallClicked=function(){var e=t.sentryApp;t.trackIntegrationEvent({eventKey:"integrations.uninstall_clicked",eventName:"Integrations: Uninstall Clicked",integration_status:e.status})},t}return d()(n,[{key:"getEndpoints",value:function(){var t=this.props,e=t.organization,n=t.params.integrationSlug;return[["sentryApp","/sentry-apps/".concat(n,"/")],["featureData","/sentry-apps/".concat(n,"/features/")],["appInstalls","/organizations/".concat(e.slug,"/sentry-app-installations/")]]}},{key:"onLoadAllEndpointsSuccess",value:function(){var t=this.props,e=t.organization,r=t.params.integrationSlug,a=t.router;"internal"!==this.sentryApp.status?(y()(w()(n.prototype),"onLoadAllEndpointsSuccess",this).call(this),Object(M.a)(r,"sentry_app_viewed")):a.push("/settings/".concat(e.slug,"/developer-settings/").concat(r,"/"))}},{key:"renderPermissions",value:function(){var t=this.permissions;return Object.keys(t).some((function(e){return t[e].length>0}))?Object(K.f)(X,null,Object(K.f)(Z,null,"Permissions"),t.read.length>0&&Object(K.f)(V,null,Object(K.f)($,null),Object(K.f)(Q,{key:"read"},Object(z.c)("[read] access to [resources] resources",{read:Object(K.f)("strong",null,"Read"),resources:t.read.join(", ")}))),t.write.length>0&&Object(K.f)(V,null,Object(K.f)($,null),Object(K.f)(Q,{key:"write"},Object(z.c)("[read] and [write] access to [resources] resources",{read:Object(K.f)("strong",null,"Read"),write:Object(K.f)("strong",null,"Write"),resources:t.write.join(", ")}))),t.admin.length>0&&Object(K.f)(V,null,Object(K.f)($,null),Object(K.f)(Q,{key:"admin"},Object(z.c)("[admin] access to [resources] resources",{admin:Object(K.f)("strong",null,"Admin"),resources:t.admin.join(", ")})))):null}},{key:"renderTopButton",value:function(t,e){var n=this,r=this.install;return r?Object(K.f)(E.a,{disabled:!e,message:Object(z.c)("Are you sure you want to remove the [slug] installation?",{slug:this.integrationSlug}),onConfirm:function(){return n.handleUninstall(r)},onConfirming:this.recordUninstallClicked,priority:"danger"},Object(K.f)(et,{size:"small","data-test-id":"sentry-app-uninstall"},Object(K.f)(U.vb,{isCircled:!0,style:{marginRight:Object(D.a)(.75)}}),Object(z.b)("Uninstall"))):e?Object(K.f)(tt,{"data-test-id":"install-button",disabled:t,onClick:function(){return n.handleInstall()},priority:"primary",size:"small",style:{marginLeft:Object(D.a)(1)}},Object(z.b)("Accept & Install")):this.renderRequestIntegrationButton()}},{key:"renderConfigurations",value:function(){return null}},{key:"integrationType",get:function(){return"sentry_app"}},{key:"sentryApp",get:function(){return this.state.sentryApp}},{key:"description",get:function(){return this.state.sentryApp.overview||""}},{key:"author",get:function(){return this.sentryApp.author}},{key:"resourceLinks",get:function(){return"published"!==this.sentryApp.status?[]:[{title:"Documentation",url:"https://docs.sentry.io/product/integrations/".concat(this.integrationSlug,"/")}]}},{key:"permissions",get:function(){return Object(_.a)(this.sentryApp.scopes)}},{key:"installationStatus",get:function(){return Object(T.g)(this.install)}},{key:"integrationName",get:function(){return this.sentryApp.name}},{key:"featureData",get:function(){return this.state.featureData}},{key:"install",get:function(){var t=this;return this.state.appInstalls.find((function(e){return e.app.slug===t.sentryApp.slug}))}}]),n}(B.a),Q=Object(k.a)("p",{target:"e1nw372o0",label:"Text"})({name:"1y1i75n",styles:"margin:0px 6px;"}),V=Object(k.a)("div",{target:"e1nw372o1",label:"Permission"})({name:"k008qs",styles:"display:flex;"}),X=Object(k.a)("div",{target:"e1nw372o2",label:"PermissionWrapper"})("padding-bottom:",Object(D.a)(2),";"),Z=Object(k.a)("p",{target:"e1nw372o3",label:"Title"})("margin-bottom:",Object(D.a)(1),";font-weight:bold;"),$=Object(k.a)((function(t){return Object(K.f)(R.a,a()({size:7},t))}),{target:"e1nw372o4",label:"Indicator"})("margin-top:3px;color:",(function(t){return t.theme.success}),";"),tt=Object(k.a)(S.b,{target:"e1nw372o5",label:"InstallButton"})("margin-left:",Object(D.a)(1),";"),et=Object(k.a)(S.b,{target:"e1nw372o6",label:"StyledUninstallButton"})("color:",(function(t){return t.theme.gray300}),";background:",(function(t){return t.theme.background}),";border:",(function(t){return"1px solid ".concat(t.theme.gray300)}),";box-sizing:border-box;box-shadow:0px 2px 1px rgba(0,0,0,0.08);border-radius:4px;");e.default=Object(N.a)(G)}}]);
//# sourceMappingURL=SentryAppDetailedView.js.map