.\" Man page generated from reStructuredText.
.
.TH "PWCLIP" "1" "Jan 14, 2021" "1.7.16" "pwclip"
.SH NAME
pwclip \- pwclip documentation
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH DESCRIPTION
.sp
pwclip is a password management tool. It\(aqs main target is having fast and
comfortable access to passwords by storing them for a variable time in the
systems clipboard (copy/paste buffer). It uses either GnuPG2 or OpenSSL
(converted to GPGSM) keys for cryptographic operations. It also works with
yubikey\(aqs challenge\-response to generate uniq HMAC\-SHA1 hashes as well.
.sp
The main feature is the pwcli/pwclip mode which provides easy access to the
~/.passcrypt file. That file is used by default as password storage. The
program is executed in gui mode when pwclip is called and in cli mode when
pwcli is called respectivly. It creates the ~/.passcrypt file which is gpg
encrypted text using either the value of GPGKEY or GPGKEYS from the users
environment as gpg encryption recipients. On startup it lookes for a
~/.pwd.yaml file which is merged with the already known passwords from the
~/.passcrypt file if there already is one. All entrys in the ~/.passcrypt file
will be overridden by entrys from the ~/.pwd.yaml file. Adding, removing or
changing password entrys is also possible using pwcli mode.
.sp
The second operating mode is for operating on yubikeys to generate uniq
responses which might be used as passwords while they can be generated by that
exact yubikey only. The first yubikey found on the system and the first slot,
configured with (HMAC\-SHA1) challenge\-response, will be used. For that function
Windows is supported (see "Install" section).
.sp
To catch user input python\(aqs Tk (tkinter) library is used to create a simple
password input window. The appropriate response is saved for only 3 seconds
by default to not have it exposed as soon as it\(aqs used. The utility also
supports the input of any integer which is then used as timer. Otherwise the
environment is searched for PWCLIPTIME and uses the value of that environment
variable as timer. The timer is used as time in which the received password
stays in the paste buffer bevore its replaced by the previously copied value.
As you may see there is an optional commet which is used as text notification
displayed on the screen if set. Therefor python3\(aqs gi notify2 is used which is
another reason for discontinuing python2 support.
.sp
I would encourage you to bind pwclip to a shortcut within your X\-Environment
to have access to your passwords at any time. On Windows\-Systems you need to
create a link for it somewhere. When editing that link you may set a keyboard
shortcut (could not find a nicer solution by now). The target for that link
then whould be "%PYTHONINSTALLDIR%\escripts\epwclip.exe".
.sp
I\(aqve been trying my best to keep the passwords from unwanted access BUT i do
!NOT GUARANTEE! that the passwords handled during runtime are safe from other
users access (especially "root" on linux systems \- help on that is very
welcome) \- please be aware of that!
.sp
Since version 1.2 openssl keys are supported. For the use with pwclip they will
be converted to gpg\-keys automaticly and gpgsm is used instead of gpg \- openssl
is not used for en/decryption to be precisely.
.sp
The ~/.pwd.yaml as well as the ~/.passcrypt file is assembled as a list of one
or more users which should be named like the username used for current system
login. You may have more than one users passwords in the passcrypt but any user
who can store passwords also is able to read password stored for other users in
that file. It is just of use for visual kategories if you have stored passwords
for different systems users sharing the same passcrypt file.
As an example: A person called "Andrew" has a username called "bob". On some
other machine he has a username called "cat" and he uses SSH for both of them.
The shared passcrypt file would be assembled like the attached YAML\-Format
section. If so providing \-u or \-A when beeing logged in as "bob" or "cat"
respectivly may be omitted. In the following example both, "bob" and "cat" have
an entry called ssh. If \-A is used in that case the entry corresponding to the
logged\-in user is prefered. If in doubt you\(aqre able to read the crypt file
using "gpg \-d ~/.passcrypt" as well (assuming the correct gpg\-key is present).
.SH YAML-FORMAT
.sp
\-\-\-
.INDENT 0.0
.TP
.B bob:
\- ssh:
.INDENT 7.0
.INDENT 3.5
\- $om3(rypt!cPass
.sp
\- DoNotForgetSomethingReminder
.UNINDENT
.UNINDENT
.sp
\- othertool:
.INDENT 7.0
.INDENT 3.5
\- 0th3r(rypt!cPass
.UNINDENT
.UNINDENT
.TP
.B cat:
\- ssh:
.INDENT 7.0
.INDENT 3.5
\- $om30ther(rypticPass
.UNINDENT
.UNINDENT
.UNINDENT
.SH SYNOPSIS
.INDENT 0.0
.INDENT 3.5
\fBpwclip\fP  [\fIoptions\fP]
.UNINDENT
.UNINDENT
.SH OPTIONS
.INDENT 0.0
.TP
.B \-\-version
show program\(aqs version number and exit
.UNINDENT
.INDENT 0.0
.TP
.B \-D, \-\-debug
debugging mode
.UNINDENT
.INDENT 0.0
.TP
.B \-A, \-\-all
switch to all users entrys ("d0n" only is default)
.UNINDENT
.INDENT 0.0
.TP
.B \-o, \-\-stdout
print password to stdout (insecure and unrecommended)
.UNINDENT
.INDENT 0.0
.TP
.B \-s, \-\-show\-passwords
show passwords when listing (replaced by "*" is default)
.UNINDENT
.INDENT 0.0
.TP
.B \-t seconds
time to wait before resetting clip (3 is default)
.UNINDENT
.INDENT 0.0
.TP
.B \-p PWD, \-\-password PWD
enter password for add/change actions (insecure & not recommended)
.UNINDENT
.INDENT 0.0
.TP
.B \-\-comment COM
enter comment for add/change actions
.UNINDENT
.INDENT 0.0
.TP
.B \-R
use remote backup given by \-\-remote\-host
.UNINDENT
.INDENT 0.0
.TP
.B \-\-remote\-host HOST
use HOST for connections
.UNINDENT
.INDENT 0.0
.TP
.B \-\-remote\-user USER
use USER for connections to HOST ("d0n" is default)
.UNINDENT
.INDENT 0.0
.TP
.B \-r "ID ...", \-\-recipients "ID ..."
one ore more gpg\-key ID(s) to use for encryption (strings seperated by spaces within "")
.UNINDENT
.INDENT 0.0
.TP
.B \-u USER, \-\-user USER
query entrys only for USER (\-A overrides, "d0n" is default)
.UNINDENT
.INDENT 0.0
.TP
.B \-x, \-\-x509
force ssl compatible gpgsm mode \- usually is autodetected (use \-\-cert & \-\-key for imports)
.UNINDENT
.INDENT 0.0
.TP
.B \-C SSL\-Certificate, \-\-cert SSL\-Certificate
one\-shot setting of SSL\-Certificate
.UNINDENT
.INDENT 0.0
.TP
.B \-K SSL\-Private\-Key, \-\-key SSL\-Private\-Key
one\-shot setting of SSL\-Private\-Key
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ca SSL\-CA\-Certificate, \-\-ca\-cert SSL\-CA\-Certificate
one\-shot setting of SSL\-CA\-Certificate
.UNINDENT
.INDENT 0.0
.TP
.B \-P CRYPTFILE, \-\-passcrypt CRYPTFILE
set location of CRYPTFILE to use as password store (~/.passcrypt is default)
.UNINDENT
.INDENT 0.0
.TP
.B \-Y YAMLFILE, \-\-yaml YAMLFILE
set location of YAMLFILE to read whole sets of passwords from a yaml file (~/.pwd.yaml is default)
.UNINDENT
.INDENT 0.0
.TP
.B \-S {1,2}, \-\-slot {1,2}
set one of the two yubikey slots (only useful with \-y)
.UNINDENT
.INDENT 0.0
.TP
.B \-y [SERIAL], \-\-ykserial [SERIAL]
switch to yubikey mode and optionally set SERIAL of yubikey (autoselect serial and slot is default)
.UNINDENT
.INDENT 0.0
.TP
.B \-a ENTRY, \-\-add ENTRY
add ENTRY (password will be asked interactivly)
.UNINDENT
.INDENT 0.0
.TP
.B \-c ENTRY, \-\-change ENTRY
change ENTRY (password will be asked interactivly)
.UNINDENT
.INDENT 0.0
.TP
.B \-d ENTRY [ENTRY ...], \-\-delete ENTRY [ENTRY ...]
delete ENTRY(s) from the passcrypt list
.UNINDENT
.INDENT 0.0
.TP
.B \-l [PATTERN], \-\-list [PATTERN]
pwclip an entry matching PATTERN if given \- otherwise list all entrys
.UNINDENT
.SH USAGE
.INDENT 0.0
.INDENT 3.5
Although is was planed as GUI\-Program it\(aqs also possible to be executed from
terminals. For Windows, Linux and OSX there is an appropriate executable
packed which might be executed like the following examples will show:
.sp
\fB\-GPG\-Mode\-\fP
.sp
If there is an environment variable called GPGKEYS it will use those keys to
encrypt on changes to the password file. To list the password file you may use
the list switch followed by optional search pattern like:
.sp
\fBpwcli \-l\fP
.sp
or
.sp
\fBpwcli \-l $PATTERN\fP
.sp
as you can see the yaml format tends to be used for multiple user names to
better manage large lists. By default the current users entrys will be listed
only. To have them all listed (or searched for by the above pattern example)
use:
.sp
\fBpwcli \-A \-l $PATTERN\fP
.sp
To one\-shot convert a key/cert pair in openssl x509 format, read passwords from
passwords.yaml and list them:
.sp
\fBpwcli \-Y passwords.yaml \-\-cert ssl.crt \-\-key ssl.key \-\-ca\-cert ca.crt \-l\fP
.sp
\fB\-Yubikey\-Mode\-\fP
.sp
The YKSERIAL environment variable is used if found to select the yubikey to use
if more than one key is connected. Otherwise the first one found is chosen.
Likewise it also accepts an option:
.sp
\fBpwcli \-y $YKSERIAL\fP
.sp
To have it wait for a specific time like 60 seconds (bevore resetting the paste
buffer to the previously copied value) the PWCLIPTIME environment variable is
used or also the command accepts it as input:
.sp
\fBpwcli \-t 60 \-l somename\fP
.sp
Most of the options may be combined. For more information on possible options in
cli mode please see:
.sp
\fBpwcli \-\-help\fP
.sp
\fB\-GUI\-Modes\-\fP
.sp
For the GUI\-Mode just use one of the following commands, also accepting most of
the commandline arguments:
.sp
\fBpwclip\fP
.sp
\fBykclip\fP
.UNINDENT
.UNINDENT
.SH TROUBLESHOOT
.sp
When using the yubikey challenge\-response mode there is a bug in the usb_hid
interface. This is because of python2 => 3 transition, most likely and can be
fixed by executing the following command:
.sp
\fBsudo vi +\(aq:107s/\e(.* =\e).*/\e1 response[0]/\(aq +\(aq:wq\(aq /usr/local/lib/python3.5/dist\-packages/yubico/yubikey_4_usb_hid.py\fP
.sp
Explained:
.sp
In line 107 of the file
.sp
\fB/usr/local/lib/python3.5/dist\-packages/yubico/yubikey_4_usb_hid.py\fP
.sp
the ord() coversion of the response:
.sp
\fBr_len = ord(response[0])\fP
.sp
needs to be replaced by:
.sp
\fBr_len = response[0]\fP
.SH CREDITS
.sp
I hope that this might be somewhat of help or at least be inspiring for own
ideas. You\(aqre alway welcome to leave me a message for reviews or feature
requests as well as bug reports: <\fI\%mail@leonpelzer.de\fP>
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
Python3 developers for IMHO one of the best programming languages
.IP \(bu 2
stackoverflow.com for hosting endless threads of troubleshooting
.IP \(bu 2
Pyperclip for the excellent Windows & OSX clipboard code
.IP \(bu 2
Conrad Parker for xsel as linux copy/paste backend
.IP \(bu 2
Yubico (cheap & solid HW\-Security\-Modules) & python\-yubico developers
.IP \(bu 2
GNU Privacy Guard (basic kryptography) & python\-gnupg developers
.IP \(bu 2
SonicLux for testing and telling me that a final version must not be 0.3.3 :D
.UNINDENT
.UNINDENT
.UNINDENT
.SH SEE ALSO
.INDENT 0.0
.INDENT 3.5
python3(1), gpg2(1), gpgsm(1), openssl(1), ssh(1), yaml(1)
.UNINDENT
.UNINDENT
.SH AUTHOR
Leon Pelzer
.SH COPYRIGHT
2018, Leon Pelzer
.\" Generated by docutils manpage writer.
.
