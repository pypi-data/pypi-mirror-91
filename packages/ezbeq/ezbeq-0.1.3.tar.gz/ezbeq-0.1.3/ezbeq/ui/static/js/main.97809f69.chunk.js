(this.webpackJsonpezbeq=this.webpackJsonpezbeq||[]).push([[0],{132:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(0),c=n.n(r),i=n(13),o=n.n(i),s=(n(123),n(17)),u=n(16),l=n.n(u),d=n(22),h=n(6),p=n(33),f=n(53),j=n(24),b=n(54),g=n(80),O=n(79),x=n(181),m=n(42),A=Object(f.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}})),w={PaperProps:{style:{maxHeight:224,width:250}}};function v(e,t,n,a){return{fontWeight:-1===t.indexOf(e)?a?n.typography.fontWeightRegular:n.typography.fontWeightLight:n.typography.fontWeightMedium,textDecoration:a?"none":"line-through"}}var y=function(e){var t=e.name,n=e.value,r=e.handleValueChange,c=e.values,i=e.multi,o=void 0===i||i,s=e.isInView,u=A(),l=Object(j.a)();return Object(a.jsxs)(b.a,{className:u.formControl,children:[Object(a.jsx)(g.a,{id:"".concat(t,"-label"),children:t}),Object(a.jsx)(O.a,{labelId:"".concat(t,"-label"),id:"".concat(t,"-select"),multiple:o,value:n,onChange:r,input:Object(a.jsx)(x.a,{}),MenuProps:w,children:c.map((function(e){return Object(a.jsx)(m.a,{value:e,style:v(e,n,l,s(e)),children:e},e)}))})]})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(r.useState)(null!==e?e:[]),n=Object(h.a)(t,2),a=n[0],c=n[1],i=function(e){c(e.target.value)};return[a,i]},C=n(11),S=n(101),I=n(185),L=n(187),k=n(73),R=n(183),T=n(137),Q=n(41),B=n(190),U=n(109),N=n(136),D=n(138),P=n(188),V=n(100),G=n.n(V),M=n(97),K=n.n(M),Y=n(99),q=n.n(Y),z=n(52),J="/api/1",F=new function e(){var t=this;Object(z.a)(this,e),this.getAuthors=function(){return t.doGet("authors")},this.getYears=function(){return t.doGet("years")},this.getAudioTypes=function(){return t.doGet("audiotypes")},this.getMeta=function(){return t.doGet("meta")},this.doGet=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/").concat(t),{method:"GET"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("EzBeq.get".concat(t," failed, HTTP status ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.appendTo=function(e,t,n){return n&&n.length>0?"".concat(e).concat(-1===e.indexOf("?")?"?":"&").concat(t,"=").concat(n.join(",")):e},this.search=Object(d.a)(l.a.mark((function e(){var n,a,r,c,i,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:null,a=o.length>1&&void 0!==o[1]?o[1]:null,r=o.length>2&&void 0!==o[2]?o[2]:null,c=t.appendTo(t.appendTo(t.appendTo("".concat(J,"/search"),"authors",n),"years",a),"audioTypes",r),e.next=6,fetch(c,{method:"GET"});case 6:if((i=e.sent).ok){e.next=9;break}throw new Error("EzBeq.search failed, HTTP status ".concat(i.status));case 9:return e.next=11,i.json();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)}))),this.load=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.search());case 1:case"end":return e.stop()}}),e)}))),this.sendFilter=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/minidsp/").concat(n),{method:"PUT",body:JSON.stringify({id:t}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("EzBeq.sendFilter failed, HTTP status ".concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.clearSlot=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/minidsp/").concat(t),{method:"DELETE"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("EzBeq.clearSlot failed, HTTP status ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.activateSlot=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/minidsp/").concat(t),{method:"PUT",body:JSON.stringify({command:"activate"}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("EzBeq.activateSlot failed, HTTP status ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getMinidspConfig=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.doGet("minidsps"));case 1:case"end":return e.stop()}}),e)})))},H=n(184),W=n(186),Z=n(98),X=n.n(Z),_=Object(f.a)((function(e){return{root:{flexGrow:1,width:"100wh",height:"100vh","& > *":{margin:e.spacing(1)}},noLeft:{marginLeft:"0px"},noLeftTop:{marginLeft:"0px",marginTop:"0px"},title:{flexGrow:1,marginLeft:e.spacing(1)},search:Object(p.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(C.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(C.b)(e.palette.common.white,.25)},marginLeft:0,width:"50%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(p.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),advancedFilter:{marginLeft:"4px",marginRight:"0px"},smallAvatar:{width:e.spacing(3),height:e.spacing(3)}}})),$=function(){var e=Object(H.a)("(prefers-color-scheme: dark)"),t=c.a.useMemo((function(){return Object(S.a)({palette:{type:e?"dark":"light"}})}),[e]),n=_(),i=Object(r.useState)([]),o=Object(h.a)(i,2),u=o[0],p=o[1],f=Object(r.useState)([]),j=Object(h.a)(f,2),b=j[0],g=j[1],O=Object(r.useState)([]),x=Object(h.a)(O,2),m=x[0],A=x[1],w=Object(r.useState)([]),v=Object(h.a)(w,2),C=v[0],V=v[1],M=Object(r.useState)({}),Y=Object(h.a)(M,2),z=Y[0],J=Y[1],Z=Object(r.useState)([]),$=Object(h.a)(Z,2),ee=$[0],te=$[1],ne=Object(r.useState)([]),ae=Object(h.a)(ne,2),re=ae[0],ce=ae[1],ie=Object(r.useState)([]),oe=Object(h.a)(ie,2),se=oe[0],ue=oe[1],le=Object(r.useState)([]),de=Object(h.a)(le,2),he=de[0],pe=de[1],fe=E(),je=Object(h.a)(fe,2),be=je[0],ge=je[1],Oe=E(),xe=Object(h.a)(Oe,2),me=xe[0],Ae=xe[1],we=E(),ve=Object(h.a)(we,2),ye=ve[0],Ee=ve[1],Ce=E(""),Se=Object(h.a)(Ce,2),Ie=Se[0],Le=Se[1],ke=Object(r.useState)(!1),Re=Object(h.a)(ke,2),Te=Re[0],Qe=Re[1],Be=Object(r.useState)(-1),Ue=Object(h.a)(Be,2),Ne=Ue[0],De=Ue[1],Pe=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:a=e.sent,t(a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){Pe(p,F.load)}),[]),Object(r.useEffect)((function(){Pe(J,F.getMeta)}),[]),Object(r.useEffect)((function(){Pe(pe,F.getMinidspConfig)}),[]),Object(r.useEffect)((function(){Pe(g,F.getAuthors)}),[]),Object(r.useEffect)((function(){Pe(A,F.getYears)}),[]),Object(r.useEffect)((function(){Pe(V,F.getAudioTypes)}),[]),Object(r.useEffect)((function(){var e=function(e){return!(be.length&&!(be.indexOf(e.author)>-1)||me.length&&!(me.indexOf(e.year)>-1)||ye.length&&!e.audioTypes.some((function(e){return ye.indexOf(e)>-1}))||Ie&&!e.title.toLowerCase().includes(Ie.toLowerCase()))};Pe(te,(function(){return u.filter(e)}))}),[u,ye,me,be,Ie]),Object(r.useEffect)((function(){Pe(ce,(function(){return Object(s.a)(new Set(ee.map((function(e){return e.year}))))})),Pe(ue,(function(){return Object(s.a)(new Set(ee.map((function(e){return e.audioTypes})).flat()))}))}),[ee]);var Ve=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ee.find((function(e){return e.id===t})),e.next=3,F.sendFilter(a.id,n);case 3:r=e.sent,pe(r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.clearSlot(t);case 2:n=e.sent,pe(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.activateSlot(t);case 2:n=e.sent,pe(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=[{field:"id",headerName:" ",width:25,valueFormatter:function(e){return e.value+1}},{field:"actions",headerName:"Actions",width:120,renderCell:function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Q.a,{"aria-label":"send",disabled:-1===Ne,onClick:function(){return Ve(Ne,e.row.id)},color:"primary",edge:"start",children:Object(a.jsx)(K.a,{})}),Object(a.jsx)(Q.a,{"aria-label":"activate",onClick:function(){return Me(e.row.id)},color:"primary",edge:"start",children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(Q.a,{"aria-label":"clear",onClick:function(){return Ge(e.row.id)},color:"primary",edge:"start",children:Object(a.jsx)(q.a,{})})]})}},{field:"last",headerName:"Loaded",flex:.45}],Ye=[{field:"title",headerName:"Title",flex:.6,renderCell:function(e){return e.row.url?Object(a.jsx)("a",{href:e.row.url,target:"_beq",children:e.value}):e.value}},{field:"audioTypes",headerName:"Audio Type",flex:.4}],qe=function(e){return e.toString().padStart(2,"0")};return Object(a.jsxs)(I.a,{theme:t,children:[Object(a.jsx)(W.a,{}),Object(a.jsxs)("div",{className:n.root,children:[Object(a.jsx)(L.a,{position:"static",className:n.noLeftTop,children:Object(a.jsxs)(R.a,{children:[Object(a.jsx)(B.a,{alt:"beqcatalogue",variant:"rounded",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAHmUExURRUoRhsuTgQUKAIGEwcTJwkUKDhCUgAAABUnRRcqSxMnRAoVKhcoRRYpSQUNHBEeNCIRIgcSJBIkRBwoPRQoRwsVJwEGKRgrTBIfPa8ABf+gLFw5JhUiOK7XAP+lKwwaMQIDBsUDAxEkRgoiSPudLE5pEz6uyM8DAwYKGmeCCwUIDRAiQRgkORxjihcpRwwlQwMQIDosXf+rLJZq2QsfODUQHx0uQd4CAAsaJxxWa0C0ztICAj9UGbQABEO61LjjACAlLiYsNxYmISUzVlULGEZiFbsCBAEWKgsZLLXfAC0pTAEOKAoqSlU6KL3pAC80P8w0c8h3Lh0SJBpJYE01KE45Kb1yLl5GKWd9A22HBi5BGz9PaotaKj1LY0dUax8yUSUwQyAoScgCAmomT8IzcLstZNg3eVtDjY1lzSdifxQTJXVMpjqivBdAVJ8GCseAMsuDMismKcEDBGILFyp1jC4RIXORC9kDAowDDJi8AjYrKOQDAYEIER1okNOFLKDIAt6QKxceKZZmKrlvLjFBXzBBX1ENGqgxaSQeNUIfN4soVyVeeoFev5gtYLAsYmRMmVkaMDo5Qp5x4wYRKjwgOWVQPgwrPG5JnlhHP1I8MxxWgFduG7huLhE2U5ZiOjhVLcJ0LjyqxOcUrVYAAAJzSURBVDjLhdP3V9pQFAfwEPNqyECCIEsQmYIaREBExAoiInXvvbd111FX1e699/pXe2MYaj3t94d7cl8+eUlOcrHc/wQTiqv9xjVpN6VBZOzhuOSvjD8YqxdBZFhRqqAoiqTcbjeVCSwO1wvANVqK8RiGMcrJZDIpHKXCk4pRE4BIg0JcZR53zHRMu7OEVzTUA5hQk+enqcmZuY65Z01sdg9SPQGgSkqmLng5+2p2uqJImQXSKgD5KcBQDR6PJ4/jsoKU5l8ApPSFd8E7L6Oz4hJQUpIFr/fdaxmNQEhZlr26A4bNL39e9lTQCIQGQqZAWRoouoPB4CcOIUQkgouLzyUkKS27AEj17Rp73Z0SGtGylRq7vaZbw14GEhEkqqtlK3V2e103IYLC9C3Ib0flRz8LhPjKIT6uSH0JmL8PDgwODe0M7tiiA07nQPQ95ysEkCcC3lx1r9nQ5nS2GZrv1jYbDDdrC1RIlQI8z/DKawAtEwFjtpjNFstvW6MtGoUyhDfabI3VBJECjOXt2vr6Wvuvzvudra1QRjZ+9PX1beAoAz4arTpj/4nRWnl2Vmk1nvQbddbK/luqDPiis+p0vccARkYAHPfqYKE3A+Ahv+r1Pfi+vlV/egplH++BHj5KeoeWD2GtVru9F9bGY7G4Nry3DW3Yj4s7JNRMy5uAIxSIxXcdB4eHB47deCwQcgQeNanoEgAyAE+niouL/auOzdDWVmjTseqHdsrfhBIuYS4YllQ+kcu78CW5XI4QlCW8S+gJxJ0PTg4PwofjCIcQhFBVQoEfwySOnkvDs2oNfTWowpQe3twcDt4o50pM2en+V/4ADiuBy0gwQ9YAAABXelRYdFJhdyBwcm9maWxlIHR5cGUgaXB0YwAAeJzj8gwIcVYoKMpPy8xJ5VIAAyMLLmMLEyMTS5MUAxMgRIA0w2QDI7NUIMvY1MjEzMQcxAfLgEigSi4A6hcRdPJCNZUAAAAASUVORK5CYII=",className:n.smallAvatar}),Object(a.jsx)(T.a,{className:n.title,variant:"h6",noWrap:!0,children:"ezbeq"}),Object(a.jsxs)("div",{className:n.search,children:[Object(a.jsx)("div",{className:n.searchIcon,children:Object(a.jsx)(G.a,{})}),Object(a.jsx)(U.a,{placeholder:"Search\u2026",classes:{root:n.inputRoot,input:n.inputInput},inputProps:{"aria-label":"search"},value:Ie,onChange:Le,size:"small"})]}),Object(a.jsx)(N.a,{className:n.advancedFilter,control:Object(a.jsx)(D.a,{checked:Te,onChange:function(){Qe((function(e){return!e}))},size:"small"})})]})}),Te?Object(a.jsx)(P.a,{container:!0,className:n.noLeft,children:Object(a.jsxs)(P.a,{item:!0,children:[Object(a.jsx)(y,{name:"Author",value:be,handleValueChange:ge,values:b,isInView:function(e){return!0}}),Object(a.jsx)(y,{name:"Year",value:me,handleValueChange:Ae,values:m,isInView:function(e){return 0===re.length||re.indexOf(e)>-1}}),Object(a.jsx)(y,{name:"Audio Type",value:ye,handleValueChange:Ee,values:C,isInView:function(e){return 0===se.length||se.indexOf(e)>-1}})]})}):null,Object(a.jsx)(P.a,{container:!0,direction:"column",className:n.noLeft,children:Object(a.jsx)(P.a,{item:!0,style:{height:"190px",width:"100%"},children:Object(a.jsx)(k.a,{rows:he,columns:Ke,autoPageSize:!0,hideFooter:!0,density:"compact"})})}),ee.length?Object(a.jsx)(P.a,{container:!0,className:n.noLeft,children:Object(a.jsx)(P.a,{item:!0,style:{height:"".concat(window.innerHeight-306,"px"),width:"100%"},children:Object(a.jsx)(k.a,{rows:ee,columns:Ye,pageSize:100,density:"compact",sortModel:[{field:"title",sort:"asc"}],onRowSelected:function(e){return De(e.data.id)}})})}):null,z?Object(a.jsx)(P.a,{container:!0,justify:"center",className:n.noLeft,children:Object(a.jsx)(P.a,{item:!0,children:Object(a.jsxs)(T.a,{align:"center",variant:"caption",color:"textSecondary",children:["BEQCatalogue: ",function(e){if(e){var t=new Date(0);return t.setUTCSeconds(e),"".concat(t.getFullYear()).concat(qe(t.getMonth()+1)).concat(qe(t.getDate()),"_").concat(qe(t.getHours())).concat(qe(t.getMinutes())).concat(qe(t.getSeconds()))}return"?"}(z.created)]})})}):null]})]})};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)($,{})}),document.getElementById("root"))}},[[132,1,2]]]);
//# sourceMappingURL=main.97809f69.chunk.js.map