(this.webpackJsonpezbeq=this.webpackJsonpezbeq||[]).push([[0],{132:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(0),c=n.n(r),i=n(13),o=n.n(i),s=(n(123),n(16)),u=n.n(s),l=n(22),d=n(7),h=n(33),p=n(53),f=n(24),j=n(54),b=n(80),g=n(79),O=n(181),x=n(42),m=Object(p.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}})),A={PaperProps:{style:{maxHeight:224,width:250}}};function w(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}var v=function(e){var t=e.name,n=e.value,r=e.handleValueChange,c=e.values,i=e.multi,o=void 0===i||i,s=m(),u=Object(f.a)();return Object(a.jsxs)(j.a,{className:s.formControl,children:[Object(a.jsx)(b.a,{id:"".concat(t,"-label"),children:t}),Object(a.jsx)(g.a,{labelId:"".concat(t,"-label"),id:"".concat(t,"-select"),multiple:o,value:n,onChange:r,input:Object(a.jsx)(O.a,{}),MenuProps:A,children:c.map((function(e){return Object(a.jsx)(x.a,{value:e,style:w(e,n,u),children:e},e)}))})]})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(r.useState)(null!==e?e:[]),n=Object(d.a)(t,2),a=n[0],c=n[1],i=function(e){c(e.target.value)};return[a,i]},y=n(11),C=n(101),S=n(185),k=n(187),I=n(73),L=n(183),R=n(137),T=n(41),Q=n(190),B=n(109),U=n(136),N=n(138),P=n(188),D=n(100),G=n.n(D),M=n(97),K=n.n(M),V=n(99),Y=n.n(V),q=n(52),z="/api/1",J=new function e(){var t=this;Object(q.a)(this,e),this.getAuthors=function(){return t.doGet("authors")},this.getYears=function(){return t.doGet("years")},this.getAudioTypes=function(){return t.doGet("audiotypes")},this.getMeta=function(){return t.doGet("meta")},this.doGet=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(z,"/").concat(t),{method:"GET"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("EzBeq.get".concat(t," failed, HTTP status ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.appendTo=function(e,t,n){return n&&n.length>0?"".concat(e).concat(-1===e.indexOf("?")?"?":"&").concat(t,"=").concat(n.join(",")):e},this.search=Object(l.a)(u.a.mark((function e(){var n,a,r,c,i,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:null,a=o.length>1&&void 0!==o[1]?o[1]:null,r=o.length>2&&void 0!==o[2]?o[2]:null,c=t.appendTo(t.appendTo(t.appendTo("".concat(z,"/search"),"authors",n),"years",a),"audioTypes",r),e.next=6,fetch(c,{method:"GET"});case 6:if((i=e.sent).ok){e.next=9;break}throw new Error("EzBeq.search failed, HTTP status ".concat(i.status));case 9:return e.next=11,i.json();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)}))),this.load=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.search());case 1:case"end":return e.stop()}}),e)}))),this.sendFilter=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(z,"/minidsp/").concat(n),{method:"PUT",body:JSON.stringify({id:t}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("EzBeq.sendFilter failed, HTTP status ".concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.clearSlot=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(z,"/minidsp/").concat(t),{method:"DELETE"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("EzBeq.clearSlot failed, HTTP status ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.activateSlot=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(z,"/minidsp/").concat(t),{method:"PUT",body:JSON.stringify({command:"activate"}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("EzBeq.activateSlot failed, HTTP status ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getMinidspConfig=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.doGet("minidsps"));case 1:case"end":return e.stop()}}),e)})))},F=n(184),H=n(186),W=n(98),Z=n.n(W),X=Object(p.a)((function(e){return{root:{flexGrow:1,width:"100wh",height:"100vh","& > *":{margin:e.spacing(1)}},noLeft:{marginLeft:"0px"},noLeftTop:{marginLeft:"0px",marginTop:"0px"},title:{flexGrow:1,marginLeft:e.spacing(1)},search:Object(h.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(y.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(y.b)(e.palette.common.white,.25)},marginLeft:0,width:"50%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(h.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),advancedFilter:{marginLeft:"4px",marginRight:"0px"},smallAvatar:{width:e.spacing(3),height:e.spacing(3)}}})),_=function(){var e=Object(F.a)("(prefers-color-scheme: dark)"),t=c.a.useMemo((function(){return Object(C.a)({palette:{type:e?"dark":"light"}})}),[e]),n=X(),i=Object(r.useState)([]),o=Object(d.a)(i,2),s=o[0],h=o[1],p=Object(r.useState)([]),f=Object(d.a)(p,2),j=f[0],b=f[1],g=Object(r.useState)([]),O=Object(d.a)(g,2),x=O[0],m=O[1],A=Object(r.useState)([]),w=Object(d.a)(A,2),y=w[0],D=w[1],M=Object(r.useState)({}),V=Object(d.a)(M,2),q=V[0],z=V[1],W=Object(r.useState)([]),_=Object(d.a)(W,2),$=_[0],ee=_[1],te=Object(r.useState)([]),ne=Object(d.a)(te,2),ae=ne[0],re=ne[1],ce=E(),ie=Object(d.a)(ce,2),oe=ie[0],se=ie[1],ue=E(),le=Object(d.a)(ue,2),de=le[0],he=le[1],pe=E(),fe=Object(d.a)(pe,2),je=fe[0],be=fe[1],ge=E(""),Oe=Object(d.a)(ge,2),xe=Oe[0],me=Oe[1],Ae=Object(r.useState)(!1),we=Object(d.a)(Ae,2),ve=we[0],Ee=we[1],ye=Object(r.useState)(-1),Ce=Object(d.a)(ye,2),Se=Ce[0],ke=Ce[1],Ie=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:a=e.sent,t(a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){Ie(h,J.load)}),[]),Object(r.useEffect)((function(){Ie(z,J.getMeta)}),[]),Object(r.useEffect)((function(){Ie(re,J.getMinidspConfig)}),[]),Object(r.useEffect)((function(){Ie(b,J.getAuthors)}),[]),Object(r.useEffect)((function(){Ie(m,J.getYears)}),[]),Object(r.useEffect)((function(){Ie(D,J.getAudioTypes)}),[]),Object(r.useEffect)((function(){var e=function(e){return!(oe.length&&!(oe.indexOf(e.author)>-1)||de.length&&!(de.indexOf(e.year)>-1)||je.length&&!e.audioTypes.some((function(e){return je.indexOf(e)>-1}))||xe&&!e.title.toLowerCase().includes(xe.toLowerCase()))};Ie(ee,(function(){return s.filter(e)}))}),[s,je,de,oe,xe]);var Le=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$.find((function(e){return e.id===t})),e.next=3,J.sendFilter(a.id,n);case 3:r=e.sent,re(r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Re=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.clearSlot(t);case 2:n=e.sent,re(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.activateSlot(t);case 2:n=e.sent,re(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=[{field:"id",headerName:" ",width:25,valueFormatter:function(e){return e.value+1}},{field:"actions",headerName:"Actions",width:120,renderCell:function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(T.a,{"aria-label":"send",disabled:-1===Se,onClick:function(){return Le(Se,e.row.id)},color:"primary",edge:"start",children:Object(a.jsx)(K.a,{})}),Object(a.jsx)(T.a,{"aria-label":"activate",onClick:function(){return Te(e.row.id)},color:"primary",edge:"start",children:Object(a.jsx)(Z.a,{})}),Object(a.jsx)(T.a,{"aria-label":"clear",onClick:function(){return Re(e.row.id)},color:"primary",edge:"start",children:Object(a.jsx)(Y.a,{})})]})}},{field:"last",headerName:"Loaded",flex:.45}],Be=[{field:"title",headerName:"Title",flex:.6,renderCell:function(e){return e.row.url?Object(a.jsx)("a",{href:e.row.url,target:"_beq",children:e.value}):e.value}},{field:"audioTypes",headerName:"Audio Type",flex:.4}],Ue=function(e){return e.toString().padStart(2,"0")};return Object(a.jsxs)(S.a,{theme:t,children:[Object(a.jsx)(H.a,{}),Object(a.jsxs)("div",{className:n.root,children:[Object(a.jsx)(k.a,{position:"static",className:n.noLeftTop,children:Object(a.jsxs)(L.a,{children:[Object(a.jsx)(Q.a,{alt:"beqcatalogue",variant:"rounded",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAHmUExURRUoRhsuTgQUKAIGEwcTJwkUKDhCUgAAABUnRRcqSxMnRAoVKhcoRRYpSQUNHBEeNCIRIgcSJBIkRBwoPRQoRwsVJwEGKRgrTBIfPa8ABf+gLFw5JhUiOK7XAP+lKwwaMQIDBsUDAxEkRgoiSPudLE5pEz6uyM8DAwYKGmeCCwUIDRAiQRgkORxjihcpRwwlQwMQIDosXf+rLJZq2QsfODUQHx0uQd4CAAsaJxxWa0C0ztICAj9UGbQABEO61LjjACAlLiYsNxYmISUzVlULGEZiFbsCBAEWKgsZLLXfAC0pTAEOKAoqSlU6KL3pAC80P8w0c8h3Lh0SJBpJYE01KE45Kb1yLl5GKWd9A22HBi5BGz9PaotaKj1LY0dUax8yUSUwQyAoScgCAmomT8IzcLstZNg3eVtDjY1lzSdifxQTJXVMpjqivBdAVJ8GCseAMsuDMismKcEDBGILFyp1jC4RIXORC9kDAowDDJi8AjYrKOQDAYEIER1okNOFLKDIAt6QKxceKZZmKrlvLjFBXzBBX1ENGqgxaSQeNUIfN4soVyVeeoFev5gtYLAsYmRMmVkaMDo5Qp5x4wYRKjwgOWVQPgwrPG5JnlhHP1I8MxxWgFduG7huLhE2U5ZiOjhVLcJ0LjyqxOcUrVYAAAJzSURBVDjLhdP3V9pQFAfwEPNqyECCIEsQmYIaREBExAoiInXvvbd111FX1e699/pXe2MYaj3t94d7cl8+eUlOcrHc/wQTiqv9xjVpN6VBZOzhuOSvjD8YqxdBZFhRqqAoiqTcbjeVCSwO1wvANVqK8RiGMcrJZDIpHKXCk4pRE4BIg0JcZR53zHRMu7OEVzTUA5hQk+enqcmZuY65Z01sdg9SPQGgSkqmLng5+2p2uqJImQXSKgD5KcBQDR6PJ4/jsoKU5l8ApPSFd8E7L6Oz4hJQUpIFr/fdaxmNQEhZlr26A4bNL39e9lTQCIQGQqZAWRoouoPB4CcOIUQkgouLzyUkKS27AEj17Rp73Z0SGtGylRq7vaZbw14GEhEkqqtlK3V2e103IYLC9C3Ib0flRz8LhPjKIT6uSH0JmL8PDgwODe0M7tiiA07nQPQ95ysEkCcC3lx1r9nQ5nS2GZrv1jYbDDdrC1RIlQI8z/DKawAtEwFjtpjNFstvW6MtGoUyhDfabI3VBJECjOXt2vr6Wvuvzvudra1QRjZ+9PX1beAoAz4arTpj/4nRWnl2Vmk1nvQbddbK/luqDPiis+p0vccARkYAHPfqYKE3A+Ahv+r1Pfi+vlV/egplH++BHj5KeoeWD2GtVru9F9bGY7G4Nry3DW3Yj4s7JNRMy5uAIxSIxXcdB4eHB47deCwQcgQeNanoEgAyAE+niouL/auOzdDWVmjTseqHdsrfhBIuYS4YllQ+kcu78CW5XI4QlCW8S+gJxJ0PTg4PwofjCIcQhFBVQoEfwySOnkvDs2oNfTWowpQe3twcDt4o50pM2en+V/4ADiuBy0gwQ9YAAABXelRYdFJhdyBwcm9maWxlIHR5cGUgaXB0YwAAeJzj8gwIcVYoKMpPy8xJ5VIAAyMLLmMLEyMTS5MUAxMgRIA0w2QDI7NUIMvY1MjEzMQcxAfLgEigSi4A6hcRdPJCNZUAAAAASUVORK5CYII=",className:n.smallAvatar}),Object(a.jsx)(R.a,{className:n.title,variant:"h6",noWrap:!0,children:"ezbeq"}),Object(a.jsxs)("div",{className:n.search,children:[Object(a.jsx)("div",{className:n.searchIcon,children:Object(a.jsx)(G.a,{})}),Object(a.jsx)(B.a,{placeholder:"Search\u2026",classes:{root:n.inputRoot,input:n.inputInput},inputProps:{"aria-label":"search"},value:xe,onChange:me,size:"small"})]}),Object(a.jsx)(U.a,{className:n.advancedFilter,control:Object(a.jsx)(N.a,{checked:ve,onChange:function(){Ee((function(e){return!e}))},size:"small"})})]})}),ve?Object(a.jsx)(P.a,{container:!0,className:n.noLeft,children:Object(a.jsxs)(P.a,{item:!0,children:[Object(a.jsx)(v,{name:"Author",value:oe,handleValueChange:se,values:j}),Object(a.jsx)(v,{name:"Year",value:de,handleValueChange:he,values:x}),Object(a.jsx)(v,{name:"Audio Type",value:je,handleValueChange:be,values:y})]})}):null,Object(a.jsx)(P.a,{container:!0,direction:"column",className:n.noLeft,children:Object(a.jsx)(P.a,{item:!0,style:{height:"190px",width:"100%"},children:Object(a.jsx)(I.a,{rows:ae,columns:Qe,autoPageSize:!0,hideFooter:!0,density:"compact"})})}),$.length?Object(a.jsx)(P.a,{container:!0,className:n.noLeft,children:Object(a.jsx)(P.a,{item:!0,style:{height:"".concat(window.innerHeight-306,"px"),width:"100%"},children:Object(a.jsx)(I.a,{rows:$,columns:Be,pageSize:100,density:"compact",sortModel:[{field:"title",sort:"asc"}],onRowSelected:function(e){return ke(e.data.id)}})})}):null,q?Object(a.jsx)(P.a,{container:!0,justify:"center",className:n.noLeft,children:Object(a.jsx)(P.a,{item:!0,children:Object(a.jsxs)(R.a,{align:"center",variant:"caption",color:"textSecondary",children:["BEQCatalogue: ",function(e){if(e){var t=new Date(0);return t.setUTCSeconds(e),"".concat(t.getFullYear()).concat(Ue(t.getMonth()+1)).concat(Ue(t.getDate()),"_").concat(Ue(t.getHours())).concat(Ue(t.getMinutes())).concat(Ue(t.getSeconds()))}return"?"}(q.created)]})})}):null]})]})};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(_,{})}),document.getElementById("root"))}},[[132,1,2]]]);
//# sourceMappingURL=main.c8eabea0.chunk.js.map