<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.14: http://docutils.sourceforge.net/" />
<title>rsclib: Utility Routines</title>
<meta name="author" content="Ralf Schlatterbeck &lt;rsc&#64;runtux.com&gt;" />
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2007-12-21 16:51:22 +0100 (Fri, 21 Dec 2007) $
:Version: $Revision: 4316 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.
*/

/* "! important" is used here to override other ``margin-top`` and
   ``margin-bottom`` styles that are later in the stylesheet or 
   more specific.  See <http://www.w3.org/TR/CSS1#the-cascade>. */
.first {
  margin-top: 0 ! important }

.last {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

a.reference img {
  border-width: 0px ;
  }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em }

div.footer, div.header {
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.line-block {
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

table.citation {
  border-left: solid thin gray }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid thin black }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

th.docinfo-name, th.field-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

tt.docutils {
  background-color: #eeeeee }

ul.auto-toc {
  list-style-type: none }

body {
  background-color: #F0F0FF }

p img {
  vertical-align: text-top }


</style>
</head>
<body>
<div class="document" id="rsclib-utility-routines">
<h1 class="title">rsclib: Utility Routines</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>Ralf Schlatterbeck &lt;<a class="reference external" href="mailto:rsc&#64;runtux.com">rsc&#64;runtux.com</a>&gt;</td></tr>
</tbody>
</table>
<p>The library includes various utility modules used in other projects.</p>
<blockquote>
<ul class="simple">
<li>ast_call: A simple call manager using asterisk: This can be used to
originate a call and log all event associated to that call. So you
can find out the status of the call and optionally the dialstatus.</li>
<li>ast_cdr: parser for CDR records in asterisk. We currently use
text-files only, this might be later extended for database use.</li>
<li>ast_probe: Methods for checking for running asterisk</li>
<li>Autosuper magic (originally from Guido van Rossums announcement of
Python 2.2): For refactoring it's a good idea that each class knows
its parents (that the parent is not hardcoded in the upcall),
achieved by adding a the __super attribute. Use as, e.g.,
self.__super.method for calling method in the parent.</li>
<li>base_pickler: Allow to specify a dictionary of pickle exceptions, if
the value in the dictionary is in __dict__ when pickle is called, the
value in __dict__ is replaced with the value in the exception
dictionary.</li>
<li>bero: A configurator for the <a class="reference external" href="https://shop.beronet.com/product_info.php/cPath/56/products_id/159">bero*fos</a> failover switch. See my
<a class="reference external" href="http://blog.runtux.com/2009/04/09/81/">blogpost</a> why I wrote that (short summary: to work around bugs in
the firmware of the device which are not addressed by the
configurator code that comes with the device).</li>
<li>Config_File for python-syntax configuration files used in several of
my projects.</li>
<li>crm: Tools for the cluster resource manager of the pacemaker high
availability project. We allow querying of nodes, resources and
errors for resources as well as resetting errors and migration of
resources.</li>
<li>execute: module for executing commands and handling IO, this also
has a Lock and a Log mixin. Now there is also a framework for
executing processes in a pipeline, there can be fork-points in the
pipeline where the output of one process feeds several pipelines.
See test_exec.py, test2_exec.py and test3_exec.py.</li>
<li>grepmime: search for pattern in email attachments (even if these are
encoded)</li>
<li>inductance: Inductance calculation of air-cored cylindrical
flat-winded coil according to Robert Weaver
<a class="reference external" href="http://electronbunker.ca/CalcMethods3b.html">http://electronbunker.ca/CalcMethods3b.html</a></li>
<li>IP_Address: IP v4 and v6 Addresses with subnet masking</li>
<li>iter_recipes: magic with iterators</li>
<li>isdn: model the status of Asterisk ISDN lines, either Linux Call
Router (LCR) ISDN lines or lines managed by DAHDI. Special case for
Xorcom modules which provide more information using Xorcom-specific
files in /proc than native DAHDI modules.</li>
<li>lc_resonator: Frequency calculation for L-C resonator</li>
<li>Math implements Euclids algorithm for greatest common divisor and as
a by-product the least common multiple</li>
<li>nmap: A parser for output of nmap scans to (e.g. to generate tables
in TeX)</li>
<li>ocf: small framework for writing OCF scripts for the heartbeat
cluster resource manager (probably also usable for the newer version
called pacemaker but for now only tested with the version in Debian
stable aka lenny).</li>
<li>PDF_Signature: experimental code for checking signatures on adobe PDF
documents</li>
<li>Phone: Parse phone numbers (Austria-specific)</li>
<li>PM_Value: Possibly missing value, encapsulate a number which may be
missing and associated arithmetics.</li>
<li>pycompat: Utilities for running under different python versions</li>
<li>Rational: Implementation of Rational numbers</li>
<li>stateparser: Simple state-machine parser class, this is used for
writing line-based parsers using a state machine. For an example
usage see nmap. After parsing the result can be pickled but we lose
the ability to continue parsing after reading from the pickled
result.</li>
<li>sqlparser: Parse SQL dumps from postgreSQL and mysql and optionally
create an new (e.g. anonymized) sql dump</li>
<li>timeout: A simple timeout mechanism using SIGALRM</li>
<li>Tex_CSV_Writer: Write CVS files in a syntax that can be parsed by
TeX. Implements same interface as the csv module. Only implements
writing.</li>
<li>trafficshape: Simple traffic shaping configuration: Currently
generates Linux tc commands for a traffic shaping config using hfsc
for shaping and sfq or red for the leaf qdiscs. We also provide a
translator from iptables mangle rules (for traffic marking) to tc
commands for filtering. This is needed if we want to do inbound
shaping. The Linux kernel doesn't support inbound shaping, so we need
to redirect all traffic to an ifb device. On that device we do
<em>outbound</em> shaping. Unfortunately when sending traffic to an ifb
device with a tc filter + action mirred command this occurs <em>before</em>
the PREROUTING chain. This means packets are not yet marked. So we
provide a parser to translate mangle rules in the PREROUTING chain to
appropriate tc commands. For implementing this we mark packets (using
the tc action xt (formerly known as ipt used for iptables marking, a
backward-compatibility option can be used) in the original device and
then use the marked information in the ifb device to send the traffic
to appropriate qdiscs. This supports a two-level approach: Rules in
iptables that match on a packet mark (using --mark) are translated to
tc commands in the ifb device (they depend on the mark already
present). All other rules are translated to a tc action xt (using -j
MARK) and a tc action mirred redirect (for sending the traffic to the
ifb device) for the <em>original</em> device (e.g. eth0 redirecting to
ifb0). The PREROUTING commands by default are directly taken from the
running kernel by default (using &quot;iptables -t mangle -S -v&quot;)</li>
</ul>
</blockquote>
<div class="section" id="resources">
<h1>Resources</h1>
<p>Download the source at <a class="reference external" href="https://sourceforge.net/projects/rsclib/">https://sourceforge.net/projects/rsclib/</a>
and install using the standard python setup, e.g.:</p>
<pre class="literal-block">
python setup.py install --prefix=/usr/local
</pre>
<p>Alternatively get it from pypi and/or install via pip.</p>
</div>
<div class="section" id="changes">
<h1>Changes</h1>
<p>Version 0.58: sqlparser</p>
<blockquote>
<ul class="simple">
<li>Fix python3 string handling for sqlparser</li>
<li>Small fix in stateparser</li>
</ul>
</blockquote>
<p>Version 0.57: isdn</p>
<blockquote>
<ul class="simple">
<li>Add parsing of beronet GSM modules</li>
<li>Support multiple bero devices with same numbering</li>
</ul>
</blockquote>
<p>Version 0.56: ast_call, isdn</p>
<blockquote>
<ul class="simple">
<li>The ast_call now is brought to latest version of pyst and asterisk</li>
<li>isdn module now supports remote isdn via isdn gateway</li>
<li>various python3 fixes</li>
</ul>
</blockquote>
<p>Version 0.55: LOCKDIR</p>
<blockquote>
<ul class="simple">
<li>Now it's possible to set the locking directory (default is still
/var/lock which is a symlink to /run/lock on modern systems) via
the environment variable LOCKDIR.</li>
</ul>
</blockquote>
<p>Version 0.54: inductance, sqlparser</p>
<blockquote>
<ul class="simple">
<li>The sqlparser now can do round-tripping (some items are in
different order)</li>
<li>More inductance formulae</li>
</ul>
</blockquote>
<p>Version 0.53: inductance, IPv4 address</p>
<blockquote>
<ul class="simple">
<li>Bring inductance to metric units (output in F, input in m)</li>
<li>Fix IPv4 address parsing when address contains less than 3 dots</li>
</ul>
</blockquote>
<p>Version 0.52: Small fixes</p>
<blockquote>
<ul class="simple">
<li>Fix unicode problem in sqlparser</li>
</ul>
</blockquote>
<p>Version 0.51: Small fixes</p>
<blockquote>
<ul class="simple">
<li>Fix IP addresses in boolean context</li>
<li>Add supported python versions to setup.py</li>
</ul>
</blockquote>
<p>Version 0.50: Small additions</p>
<blockquote>
<ul class="simple">
<li>Change Rational to no longer print mixed fractions by default</li>
<li>Allow setting the locking filename for Lock_Mixin in execute</li>
</ul>
</blockquote>
<p>Version 0.49: Python3 compatibility</p>
<blockquote>
<ul class="simple">
<li>Remove ETree, HTML_Parse, PDF_Parse, multipart_form: These are
better handled by libraries like BeautifulSoup or specific PDF
handling libs or the requests library</li>
<li>Remove ldap_lib.py: This is now nicely supported by ldap3 which
also has a native iterator for paged search</li>
<li>Remove Freshmeat.py: Freshmeat is more or less dead now and they
don't support an API-Test so it is very hard to get this right</li>
<li>Put Firstname (with all the history) into its own package, note
that this needs more work to run against the latest version of the
website</li>
<li>Lots of fixes for python3 compatibility: Where doctests existed
these pass now but there is still untested code and some code where
libaries are missing for python3 (pyst asterisk bindings and
openssl wrappers)</li>
</ul>
</blockquote>
<p>Version 0.48: Fixes for execute</p>
<blockquote>
<ul class="simple">
<li>Now we really close all relevant ends of pipes in other processes
which avoids hangs</li>
<li>Add logging to Process</li>
</ul>
</blockquote>
<p>Version 0.47: Fixes for IP_Address; pypi</p>
<blockquote>
<ul class="simple">
<li>IP_Address: Relax inheritance checks when comparing IP_Address
instances</li>
<li>Version uploaded to pypi and documented in README</li>
</ul>
</blockquote>
<p>Version 0.46: Additions to ast_probe; Bug-fix</p>
<blockquote>
<ul class="simple">
<li>ast_probe now has methods for checking sip registry and reloading
the sip subsystem in asterisk</li>
<li>Add a small script, ast_sip_check for checking sip registration on
an asterisk server and restart sip if some registrations are
missing.</li>
<li>Config_File fixes the __getattr_ method to return an
AttributeError in case of failure</li>
</ul>
</blockquote>
<p>Version 0.45: Fix ISDN ports</p>
<p>String reprentation had leading unicode 'u'</p>
<blockquote>
<ul class="simple">
<li>Fix string representation in ISDN ports</li>
</ul>
</blockquote>
<p>Version 0.44: Make line-waiting for bero configurable</p>
<p>For cluster resource berofos we make waiting for the L1 and L2 of the
ISDN line configurable. The hard-coded default was too low.</p>
<blockquote>
<ul class="simple">
<li>New config-item ISDN_WAIT_UP</li>
</ul>
</blockquote>
<p>Version 0.43: Support new berofos firmware</p>
<p>The new berofos (failover switch) firmware has some new low-level
commands which we now accept when getting the device status.</p>
<blockquote>
<ul class="simple">
<li>Fix bero.py to accept new low-level commands</li>
<li>Add some more documentation to bero.py</li>
<li>Add description of ast_probe in this README</li>
</ul>
</blockquote>
<p>Version 0.42: Feature enhancements</p>
<p>Add crm for pacemaker cluster management, new ast_probe for checking of
asterisk status. Fixes to ocf and ast_call.</p>
<blockquote>
<ul class="simple">
<li>Add crm.py</li>
<li>Add ast_probe.py</li>
<li>Allow specification of parsed config (cfg) for Call_Manager in
ast_call.py</li>
<li>Better resource monitoring for asterisk and dahdi in ocf.py</li>
<li>fix ocf.py to use new classes in isdn.py</li>
<li>isdn.py now doesn't probe asterisk for the isdn stack in use if it
finds a hint in the config-file</li>
</ul>
</blockquote>
<p>Version 0.41: Minor feature enhancements</p>
<p>Fixes to Freshmeat, pycompat, sql-dump parser.</p>
<blockquote>
<ul class="simple">
<li>Fix parsing of escaped quotes in mysql dumps</li>
<li>Freshmeat</li>
<li>pycompat fixes</li>
</ul>
</blockquote>
<p>Version 0.40: Distribution bug-fix</p>
<p>Renaming of README lead to the missing file README.rst in the distro.</p>
<blockquote>
<ul class="simple">
<li>Fix MANIFEST.in</li>
</ul>
</blockquote>
<p>Version 0.39: Minor feature enhancements</p>
<p>Fixes to hexdump, unicode issues (elementtree wrapper, stateparser).
Add some fixes to IP_Address comparison. The nmap output has changed in
recent versions, adapt to new format.</p>
<blockquote>
<ul class="simple">
<li>Make address in hexdump configurable</li>
<li>Bug-fix with comparison of sub-classes in IP_Address</li>
<li>Unicode support in ETree</li>
<li>Unicode support in stateparser</li>
<li>Fix for trailing empty attributes in CSV output of PostgreSQL dumps
in sqlparser</li>
<li>Unicode support in sqlparser (uses stateparser)</li>
<li>Parse new nmap format</li>
<li>Fix for configurable Releasetools location</li>
</ul>
</blockquote>
<p>Version 0.38: Minor feature enhancements</p>
<p>Fix boolean conversion of IP6_Address (and IP4_Address).</p>
<blockquote>
<ul class="simple">
<li>IP6_Address would throw an error when trying a truth-test. Add
__nonzero__ (which always returns True even for the 0 Address)</li>
</ul>
</blockquote>
<p>Version 0.37: Minor feature enhancements</p>
<p>Change sort-order of IP_Address, make IP_Address immutable, use
metaclass magic to allow copy-constructor semantics.</p>
<blockquote>
<ul class="simple">
<li>Sort order of IP_Address objects (both v4 and v6) now reverses the
order of the netmask: If the IP-Address part of the objects to
compare are the same, we used to sort by <em>inverse</em> netmask (putting
smaller networks with higher netmask first). We now reversed this to
be compatible with PostgrSQL cidr type objects.</li>
<li>All attributes of IP_Address objects are now implemented as
properties to return the '_' variant of the attribute. Thus
IP_Address objects are (when using the public interface) immutable.
Since we already had a __hash__ method this effectively fixes the
interface to not allow mutation of objects that are in a dictionary.</li>
<li>Allow calling the IP_Address constructors with another IP_Address
object. Since IP_Address objects are now immutable we use metaclass
trickery to return the passed object itself (instead of generating a
copy).</li>
</ul>
</blockquote>
<p>Version 0.36: Minor feature enhancements</p>
<p>Allow auto-coercion of comparison parameters. Add parent property and
is_sibling test.</p>
<blockquote>
<ul class="simple">
<li>Now comparison operators and 'in' do auto coercion.</li>
<li>Add parent property (next bigger network)</li>
<li>Add is_sibling test (same parent)</li>
</ul>
</blockquote>
<p>Version 0.35: Minor feature enhancements</p>
<p>Add 'mask_len' as an alias of 'mask' to IP_Address.</p>
<blockquote>
<ul class="simple">
<li>Need the network mask length (aka prefix length) sometimes as
mask_len (e.g. for FFM on github).</li>
</ul>
</blockquote>
<p>Version 0.34: Minor feature enhancements</p>
<p>Fix trafficshape to use new tc syntax. Add label to hexdump.</p>
<blockquote>
<ul class="simple">
<li>The tc command has renamed the <tt class="docutils literal">ipt</tt> action to <tt class="docutils literal">xt</tt> (Linux
introduced xtables as a refactoring of iptables), the old <tt class="docutils literal">ipt</tt> is
still available in <tt class="docutils literal">iproute2</tt> but we make <tt class="docutils literal">xt</tt> the default now.
A backward-compatibility parameter can be used to get the old
behavior.</li>
<li>Add save-mark to iptables action parser.</li>
<li>The hexdump class now can generate labels.</li>
</ul>
</blockquote>
<p>Version 0.33: Minor feature enhancements</p>
<p>More fixes for ast_call.</p>
<blockquote>
<ul class="simple">
<li>Add parser for events from asterisk wireshark trace</li>
<li>Add fail.log for 'real' test</li>
<li>Don't double-register call with Call_Manager</li>
<li>Allow explicit matching by account-code</li>
</ul>
</blockquote>
<p>Version 0.32: Minor feature enhancements</p>
<p>More fixes for ast_call.</p>
<blockquote>
<ul class="simple">
<li>Regression test with pyst asterisk emulator</li>
<li>Fix case where OriginateResponse immediately returns Failure</li>
<li>Tests for cases where Hangup comes before or after the
OriginateResponse</li>
</ul>
</blockquote>
<p>Version 0.31: Minor feature enhancements</p>
<p>Fix ast_call for immediately failing calls. Fix dahdi channel
computation in isdn.py.</p>
<blockquote>
<ul class="simple">
<li>Fix OriginateResponse handling in ast_call</li>
<li>Fix dahdi channel computation, can't directly use the span, use the
basechan attribute</li>
</ul>
</blockquote>
<p>Version 0.30: Minor feature enhancements</p>
<p>Fix how dahdi vs. mISDN interpret what is called an interface and what
is called a port. In mISDN we can combine several ports (physical lines)
to an interface. In dahdi both are the same (a port is a span in dahdi).</p>
<blockquote>
<ul class="simple">
<li>Remove parsing of B- and C- channels from dahdi isdn parser</li>
</ul>
</blockquote>
<p>Version 0.29: Minor feature enhancements</p>
<p>The lcr module is now named isdn. It can now handle isdn interfaces
managed by Asterisk DAHDI in addition to Linux Call Router (LCR).</p>
<p>Version 0.28: Minor feature enhancements</p>
<p>Fix inductance formula of Robert Weaver, thanks Robert for pointing me
to the correction you did on your new site! For most doctests in the
inductance module the error was in the lower percentage points.
Add an xxrange iterator to the iter_recipes that can replace pythons
native xrange iterator but works with long integers. Needed for some
operations on IPv6 addresses in the IP_Address module.</p>
<blockquote>
<ul class="simple">
<li>Fix inductance calculation according to patch from Robert Weaver</li>
<li>Add xxrange iterator to iter_recipes</li>
<li>Use new xxrange instead of xrange in IP_Address module, add a test
that failed with large numbers for IPv6</li>
</ul>
</blockquote>
<p>Version 0.27: Minor feature enhancements</p>
<p>Add pageurl and pageinfo attributes to HTML_Parser.Page_Tree, other
enhancements to HTML_Parser. Add pickle support to parser classes.
Fix comparison of IP_Address classes.</p>
<blockquote>
<ul class="simple">
<li>Add pageurl and pageinfo attributes to HTML_Parser.Page_Tree storing
information retrieved via geturl and info calls from urllib2.</li>
<li>Parser classes in stateparser.py and HTML_Parse.py where not
pickleable, fixed by removing parser-specific attributes when calling
pickle. Note that the parsing cannot be continued after reading class
from a pickle.</li>
<li>Add base_pickler module to allow pickle exceptions</li>
<li>HTML_Parse: Make Parse_Error a ValueError</li>
<li>HTML_Parse: Raise line number with exception</li>
<li>HTML_Parse: Add a timeout</li>
<li>HTML_Parse: raise Retries_Exceeded with url</li>
<li>HTML_Parse: url parameter may now be None, not joined with site
parameter</li>
<li>Add pageurl and pageinfo to HTML_Parse</li>
<li>IP_Address: Fix comparison</li>
<li>Slight refactoring of NMAP_Parser class</li>
</ul>
</blockquote>
<p>Version 0.26: Minor feature enhancements</p>
<p>Fix double-utf-8-encoding option for sqlparser. Enhance stderr handling
for exec_pipe.</p>
<blockquote>
<ul class="simple">
<li>More detected broken encodings for fix_double_encode option</li>
<li>execute.py: add error message from executed command to message raised
by exec_pipe, make stderr output available in non-failing case.</li>
</ul>
</blockquote>
<p>Version 0.25: Minor feature enhancements</p>
<p>Add sqlparser for parsing SQL dumps of PostgreSQL and mysql, add Phone
to parse phone numbers.</p>
<blockquote>
<ul class="simple">
<li>sqlparser added</li>
<li>Phone added for parsing phone numbers</li>
</ul>
</blockquote>
<p>Version 0.24: Minor feature enhancements</p>
<p>Better syntax checks and comparison operators for IP_Address, bug fixes
for parser and __str__ for IP_Address.IP6_Address</p>
<blockquote>
<ul class="simple">
<li>IP_Address better syntax checks</li>
<li>IP_Address __cmp__ and __eq__ improved for comparison with other types</li>
<li>more regression tests for IP6_Address</li>
<li>bug fixes in __str__ and parser of IP6_Address</li>
<li>support for strict checking of netmask (all bits at right of netmask
must be zero if strict_mask is True)</li>
</ul>
</blockquote>
<p>Version 0.23: Minor feature enhancements</p>
<p>IP4_Address can now be put in a dict, add a subnets iterator for
IP4_Address. Factor IP_Address and add IP6_Address</p>
<blockquote>
<ul class="simple">
<li>Add __hash__ for IP_Address</li>
<li>The new subnets iterator for IP_Address iterates over all IPs in a
subnet. Optionally a netmask can be specified.</li>
<li>Support for IPv6 addresses</li>
<li>rename IP4_Address to IP_Address</li>
</ul>
</blockquote>
<p>Version 0.22: Minor feature enhancements</p>
<p>Allow unicode ip address input, hopefully make rsclib installable via pip.</p>
<blockquote>
<ul class="simple">
<li>Address given to IP4_Address constructor now may be unicode</li>
<li>Add download_url to setup.py to make installable via pip</li>
</ul>
</blockquote>
<p>Version 0.21: Minor feature enhancements</p>
<p>Fix autosuper: allow to inherit from non-autosuper classes, some small
fixes to ast_call and lcr parser. Fix ETree pretty-printing. Update
Freshmeat to new hostname. Add dotted netmaks parsing to IP4_Address.</p>
<blockquote>
<ul class="simple">
<li>Since python2.6 constructor of &quot;object&quot; do not allow parameters, so
we need to strip these when doing the upcall from autosuper. This
fails when e.g. inheriting from a non-autosuper enabled class, e.g.,
class (With_Autosuper, dict)
in that case dict would get empty parameters. New implementation
finds out if our upcall is to &quot;object&quot;, only in that case strip
parameters.</li>
<li>ast_call now processes all queued unhandled events when a call is
matched.</li>
<li>update regression test for ast_call.Call</li>
<li>lcr parser: fix regex, port can have an empty name.</li>
<li>Optimize call matching in ast_call: mark call as closed once we are
sure about the uniqueid. Add matching of Account-Code.</li>
<li>Fix ETree pretty-printing: don't print unicode strings when arguments
are already converted</li>
<li>freshmeat.net now is freecode.com (and the API redirects there),
update Freshmeat.py to new hostname (including .netrc credentials
with compatibility for old name).</li>
<li>explicit mask paramter of IP4_Address can now be a dotted netmask.</li>
</ul>
</blockquote>
<p>Version 0.20: Not announced on freshmeat</p>
<p>Database value output for ast_cdr, added inductance calculation.</p>
<blockquote>
<ul class="simple">
<li>ast_cdr: Add methods for database values of CDR records -- database
values of CDRs are different, they don't include start, end, answer
time-stamps but instead only a calldate, in addition the amaflags are
numerical in the database.</li>
<li>added inductance calculation</li>
</ul>
</blockquote>
<p>Version 0.19: Not announced on freshmeat</p>
<p>Extend ETree with a walk method and implement small ldap library</p>
<blockquote>
<ul class="simple">
<li>ETree: add walk method to walk the tree and call an optional pre- and
post-hook function</li>
<li>ldap_lib: common ldap tasks for user and group search, and an
iterator for paged search (used with active directory).</li>
</ul>
</blockquote>
<p>Version 0.18: Not announced on freshmeat</p>
<p>Bugfix of ast_call and update for asterisk 1.6, small extension to
IP4_Address.</p>
<blockquote>
<ul class="simple">
<li>ast_call: match calls via (unique) account code</li>
<li>ast_call: State vs ChannelState parameter in Newstate event</li>
<li>ast_call: handle immediate error from asterisk (e.g. Permission Denied)</li>
<li>IP4_Address: add netblk (start and end address for address with
netmask)</li>
</ul>
</blockquote>
<p>Version 0.17: Not announced on freshmeat</p>
<p>Factor ETree (extended ElementTree) from HTML_Parse. New Freshmeat
module to get project information and submit new releases via the new
freshmeat REST API. New simple hexdump module.</p>
<blockquote>
<ul class="simple">
<li>New ETree.py (extended ElementTree)</li>
<li>New Freshmeat.py</li>
<li>New hexdump.py</li>
<li>adapt lcr module to new version of Linux Call Router</li>
</ul>
</blockquote>
<p>Version 0.16: Not announced on freshmeat</p>
<p>Add an iptables to tc translator for translating mangle rules in the
iptables PREROUTING chain to appropriate tc commands (using an ipt
action and mirred redirect actions).</p>
<blockquote>
<ul class="simple">
<li>Add iptables to tc translator to trafficshape.py</li>
</ul>
</blockquote>
<p>Version 0.15: Not announced on freshmeat</p>
<p>Add a framework for traffic shaping with linux iproute (tc). Minor
updates to iter_recipes.</p>
<blockquote>
<ul class="simple">
<li>Initial implementation of trafficshape.py</li>
<li>Add iter_recipes.combinations from python2.6 manpage of itertools
for backward compatibility</li>
</ul>
</blockquote>
<p>Version 0.14: Not announced on freshmeat</p>
<p>Add a framework for process pipeline execution, processes can either be
python methods or external programs (with parameter list).  They can be
connected in a pipe and there may be T-points in the pipe, where the
pipe forks into two or more pipelines fed by the output of one process.</p>
<blockquote>
<ul class="simple">
<li>Add process pipeline framework</li>
<li>HTML_Parse now has an explicit translate hook for preprocessing the
html page before parsing it. This defaults to the old behaviour of
filtering out common characters in broken HTML.</li>
<li>Add nmap parser (e.g. to generate TeX tables from an nmap scan)</li>
<li>Fix Lock_Mixin in execute module to remove lockfile at exit,
this used to rely on __del__ which breaks in certain cases.</li>
<li>add file upload to HTML_Parse</li>
</ul>
</blockquote>
<p>Version 0.13: Not announced on freshmeat</p>
<p>Bug-Fix Release: Fix signal handler in timeout.py</p>
<blockquote>
<ul class="simple">
<li>fix signal handler timeout.py</li>
</ul>
</blockquote>
<p>Version 0.12: Not announced on freshmeat</p>
<p>Add a simple timeout mechanism using SIGALRM.</p>
<blockquote>
<ul class="simple">
<li>add timeout.py</li>
</ul>
</blockquote>
<p>Version 0.11: Not announced on freshmeat</p>
<p>Add a parser for CDR records in asterisk. We currently use text-files
only, this might be later extended for database use. Some fixes for
ast_call, make call-handling more robust (some race conditions would
identify events of other calls as belonging to our initiated call).
Add an execute module for executing commands and handling IO, this also
has a Lock and a Log mixin. Add ocf.py, a small framework for writing
OCF scripts for the heartbeat cluster resource manager (probably also
usable for the newer version called pacemaker but for now only tested
with the version in Debian stable aka lenny). Add lcr.py to model the
status of Linux Call Router ISDN lines.</p>
<blockquote>
<ul class="simple">
<li>add ast_cdr.py</li>
<li>fix ast_call.py</li>
<li>fix up-chaining in stateparser.py</li>
<li>add execute.py</li>
<li>add ocf.py</li>
<li>add lcr.py</li>
</ul>
</blockquote>
<p>Version 0.10: Not announced on freshmeat</p>
<p>add ast_call for asterisk auto-dialling, small fixes to IP4_Address, add
bero*fos configurator, experimental code for checking PDF signature</p>
<blockquote>
<ul class="simple">
<li>add ast_call.py</li>
<li>Firstname: don't look up names with len &lt; 2</li>
<li>IP4_Address: some aliases for common functions</li>
<li>IP4_Address: add __cmp__</li>
<li>bero.py: bero*fos configurator</li>
<li>HTML_Parse updated for python 2.5</li>
<li>stateparser update: use self.matrix by default</li>
<li>PDF_Signature: experimental code for checking signatures on adobe PDF
documents</li>
<li>iter_recipes: some magic with iterators</li>
</ul>
</blockquote>
<p>Version 0.9: Not announced on freshmeat</p>
<p>Add binom to the Math package, add Firstname, Bug-Fix Release Rational</p>
<blockquote>
<ul class="simple">
<li>binom (n, m) computes the binomial coefficient of n, m.</li>
<li>Firstname: check if candidate is a first name candidate according to
popular web site.</li>
<li>Rational: On division we could get a negative denominator -- fixed</li>
<li>make Config_File a descendent of autosuper</li>
</ul>
</blockquote>
<p>Version 0.8: Not announced on freshmeat</p>
<p>Added more documentation.
State-machine parser stateparser implemented. Rational number arithmetic
package added.</p>
<blockquote>
<ul class="simple">
<li>stateparser implemented (simple state-machine line-oriented
configurable parser)</li>
<li>usage-example of IP4_Address prints debian /etc/network/interfaces
entry.</li>
<li>Math added (Euclids algorithm, gcd, lcm)</li>
<li>Rational number arithmetics</li>
<li>cookie processing for HTML_Parse</li>
<li>basic HTML auth for HTML_Parse</li>
<li>HTML_Parse: move to urllib2</li>
</ul>
</blockquote>
<p>Version 0.7: Not announced on freshmeat</p>
<p>Small Python library with various things such as Configuration file
parsing (in Python syntax), HTML and PDF parsing.</p>
<blockquote>
<ul class="simple">
<li>First Release version</li>
</ul>
</blockquote>
</div>
</div>
</body>
</html>
