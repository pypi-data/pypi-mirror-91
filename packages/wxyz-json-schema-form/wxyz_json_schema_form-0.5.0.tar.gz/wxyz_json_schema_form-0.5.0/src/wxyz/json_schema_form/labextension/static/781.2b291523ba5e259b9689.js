(self.webpackChunk_deathbeds_wxyz_json_schema_form=self.webpackChunk_deathbeds_wxyz_json_schema_form||[]).push([[781],{3781:(e,t,r)=>{"use strict";r.r(t),r.d(t,{JSONSchemaFormModel:()=>u,JSONSchemaFormView:()=>l});var s,i=r(1797),a=r(1983),n=r(3753),o=r(2139),m=r(2722),h=r.n(m),c=r(2890),d=function(e,t,r,s){return new(r||(r=Promise))((function(i,a){function n(e){try{m(s.next(e))}catch(e){a(e)}}function o(e){try{m(s.throw(e))}catch(e){a(e)}}function m(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(n,o)}m((s=s.apply(e,t||[])).next())}))};class u extends n.WXYZBox{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:u.model_name,_model_module:o.A,_model_module_version:o.q,_view_name:u.view_name,_view_module:o.A,_view_module_version:o.q,value:{},schema:{},ui_schema:{},errors:[]})}get formData(){return this.get("value")||null}set formData(e){i.JSONExt.deepEqual(e,this.formData)||this.set("value",e)}get schema(){return this.get("schema")||{}}get uiSchema(){return this.get("ui_schema")||{}}get errors(){return this.get("errors")||[]}set errors(e){this.set("errors",e)}get theRJSF(){return h()}}u.model_name="JSONSchemaFormModel",u.model_module=o.A,u.model_module_version=o.q,u.view_name="JSONSchemaFormView",u.view_module=o.A,u.view_module_version=o.q;class l extends a.BoxView{constructor(){super(...arguments),this.onChange=(e,t)=>{const{m:r}=this,{formData:s,errors:i}=e;null!=s&&(r.errors=i,r.formData=this._lastEmitted=s,this.touch())}}render(){this._idPrefix=`id-wxyz-json-schema-form-${s.nextId()}`,this.pWidget.addClass("jp-WXYZ-JSONSchemaForm"),this.m.on("change:schema change:ui_schema change:value",this.rerender,this),setTimeout((()=>d(this,void 0,void 0,(function*(){return yield this.rerender()}))),100)}get m(){return this.model}get idPrefix(){return this._idPrefix}rerender(){return d(this,void 0,void 0,(function*(){const{m:e}=this,{formData:t,schema:r,uiSchema:s}=e;null==this._form&&(yield this.initForm());const a=e.changedAttributes();if(a&&1===Object.keys(a).length&&a.value&&i.JSONExt.deepEqual(t,this._lastEmitted))return;const n=this._form.model;for(const e of Object.keys(a))switch(e){case"schema":n.schema=r;break;case"ui_schema":n.props=Object.assign(Object.assign({},n.props),{uiSchema:s});break;case"value":n.formData=t;break;default:console.warn("skipping update of",e)}}))}initForm(){return d(this,void 0,void 0,(function*(){const{m:e,onChange:t,idPrefix:r}=this,{formData:s,schema:i,uiSchema:a}=e;let n={};l._rendermime&&(n={markdown:l._rendermime.createRenderer("text/markdown")}),this._form=new c.SchemaForm(i,Object.assign({liveValidate:!0,formData:s,uiSchema:a,onChange:t,idPrefix:r},yield(0,c.ALL_CUSTOM_UI)()),n),this._form.addClass("jp-WXYZ-JSONSchemaForm-Inner"),this.pWidget.addWidget(this._form)}))}}!function(e){let t=0;e.nextId=function(){return t++}}(s||(s={}))}}]);