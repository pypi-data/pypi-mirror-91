(self.webpackChunk_deathbeds_wxyz_tpl_nunjucks=self.webpackChunk_deathbeds_wxyz_tpl_nunjucks||[]).push([[920],{920:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TemplateModel:()=>h});var i=n(81),s=n(753),o=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function h(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,h)}c((i=i.apply(e,t||[])).next())}))};const a=(0,s.lazyLoader)((()=>o(void 0,void 0,void 0,(function*(){const e=yield n.e(714).then(n.t.bind(n,377,23));return e.installJinjaCompat(),e}))));class h extends s.FnModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:h.model_name,context:null})}theFunction(e){return o(this,void 0,void 0,(function*(){let t=this.theContext;t instanceof i.WidgetModel&&(t=t.attributes);let{renderString:n}=a.get()||(yield a.load()),s=new Promise(((i,s)=>n(e||"",t||{},((e,t)=>{e?s(e):i(t)}))));return yield s}))}get theContext(){return this.get("context")}set theContext(e){this.set("context",e),this.save()}initialize(e,t){return super.initialize(e,t),this.on("change:context",this.theContextChanged,this),this.theContextChanged(),this}theContextChanged(){let e=this.previousAttributes().context;e instanceof i.WidgetModel&&e.off(void 0,void 0,this);let t=this.theContext;t instanceof i.WidgetModel&&t.on("change",this.theSourceChanged,this),this.theSourceChanged().catch(console.warn)}}h.model_name="TemplateModel",h.serializers=Object.assign(Object.assign({},s.FnModel.serializers),{context:{deserialize:i.unpack_models}})}}]);